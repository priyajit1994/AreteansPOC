Liferay.Loader.define("frontend-js-spa-web$senna@2.7.7/lib/surface/Surface",["module","exports","require","../globals/globals","frontend-js-metal-web$metal","frontend-js-metal-web$metal-dom","frontend-js-metal-web$metal-promise"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||
false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _globals=require("../globals/globals");var _globals2=_interopRequireDefault(_globals);var _metal=require("frontend-js-metal-web$metal");var _metalDom=require("frontend-js-metal-web$metal-dom");
var _metalPromise=require("frontend-js-metal-web$metal-promise");var _metalPromise2=_interopRequireDefault(_metalPromise);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&
(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}
var Surface=function(_Disposable){_inherits(Surface,_Disposable);function Surface(id){_classCallCheck(this,Surface);var _this=_possibleConstructorReturn(this,(Surface.__proto__||Object.getPrototypeOf(Surface)).call(this));if(!id)throw new Error("Surface element id not specified. A surface element requires a valid id.");_this.activeChild=null;_this.defaultChild=null;_this.element=null;_this.id=id;_this.transitionFn=null;_this.defaultChild=_this.getChild(Surface.DEFAULT);_this.maybeWrapContentAsDefault_();
_this.activeChild=_this.defaultChild;return _this}_createClass(Surface,[{key:"addContent",value:function addContent(screenId,opt_content){var child=this.defaultChild;if((0,_metal.isDefAndNotNull)(opt_content)){child=this.getChild(screenId);if(child)(0,_metalDom.removeChildren)(child);else{child=this.createChild(screenId);this.transition(child,null)}(0,_metalDom.append)(child,opt_content)}var element=this.getElement();if(element&&child)(0,_metalDom.append)(element,child);return child}},{key:"createChild",
value:function createChild(screenId){var child=_globals2.default.document.createElement("div");child.setAttribute("id",this.makeId_(screenId));return child}},{key:"getChild",value:function getChild(screenId){return _globals2.default.document.getElementById(this.makeId_(screenId))}},{key:"getElement",value:function getElement(){if(this.element)return this.element;this.element=_globals2.default.document.getElementById(this.id);return this.element}},{key:"getId",value:function getId(){return this.id}},
{key:"getTransitionFn",value:function getTransitionFn(){return this.transitionFn}},{key:"makeId_",value:function makeId_(screenId){return this.id+"-"+screenId}},{key:"maybeWrapContentAsDefault_",value:function maybeWrapContentAsDefault_(){var element=this.getElement();if(element&&!this.defaultChild){var fragment=_globals2.default.document.createDocumentFragment();while(element.firstChild)fragment.appendChild(element.firstChild);this.defaultChild=this.addContent(Surface.DEFAULT,fragment);this.transition(null,
this.defaultChild)}}},{key:"setId",value:function setId(id){this.id=id}},{key:"setTransitionFn",value:function setTransitionFn(transitionFn){this.transitionFn=transitionFn}},{key:"show",value:function show(screenId){var from=this.activeChild;var to=this.getChild(screenId);if(!to)to=this.defaultChild;this.activeChild=to;return this.transition(from,to).thenAlways(function(){if(from&&from!==to)(0,_metalDom.exitDocument)(from)})}},{key:"remove",value:function remove(screenId){var child=this.getChild(screenId);
if(child)(0,_metalDom.exitDocument)(child)}},{key:"toString",value:function toString(){return this.id}},{key:"transition",value:function transition(from,to){var transitionFn=this.transitionFn||Surface.defaultTransition;return _metalPromise2.default.resolve(transitionFn.call(this,from,to))}}]);return Surface}(_metal.Disposable);Surface.DEFAULT="default";Surface.defaultTransition=function(from,to){if(from){from.style.display="none";from.classList.remove("flipped")}if(to){to.style.display="block";to.classList.add("flipped")}};
exports.default=Surface});
Liferay.Loader.define("frontend-js-spa-web$senna@2.7.7/lib/screen/HtmlScreen",["module","exports","require","frontend-js-metal-web$metal","frontend-js-metal-web$metal-dom","frontend-js-metal-web$metal-promise","../globals/globals","./RequestScreen","../surface/Surface","frontend-js-metal-web$metal-useragent","frontend-js-metal-web$metal-uri","../utils/utils"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,
props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===
null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _metal=require("frontend-js-metal-web$metal");var _metalDom=require("frontend-js-metal-web$metal-dom");var _metalPromise=require("frontend-js-metal-web$metal-promise");
var _metalPromise2=_interopRequireDefault(_metalPromise);var _globals=require("../globals/globals");var _globals2=_interopRequireDefault(_globals);var _RequestScreen2=require("./RequestScreen");var _RequestScreen3=_interopRequireDefault(_RequestScreen2);var _Surface=require("../surface/Surface");var _Surface2=_interopRequireDefault(_Surface);var _metalUseragent=require("frontend-js-metal-web$metal-useragent");var _metalUseragent2=_interopRequireDefault(_metalUseragent);var _metalUri=require("frontend-js-metal-web$metal-uri");
var _metalUri2=_interopRequireDefault(_metalUri);var _utils=require("../utils/utils");var _utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&
(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}
var HtmlScreen=function(_RequestScreen){_inherits(HtmlScreen,_RequestScreen);function HtmlScreen(){_classCallCheck(this,HtmlScreen);var _this=_possibleConstructorReturn(this,(HtmlScreen.__proto__||Object.getPrototypeOf(HtmlScreen)).call(this));_this.metaTagsSelector="meta";_this.titleSelector="title";return _this}_createClass(HtmlScreen,[{key:"activate",value:function activate(){_get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"activate",this).call(this);this.releaseVirtualDocument();
this.pendingStyles=null}},{key:"allocateVirtualDocumentForContent",value:function allocateVirtualDocumentForContent(htmlString){if(!this.virtualDocument)this.virtualDocument=_globals2.default.document.createElement("html");this.copyNodeAttributesFromContent_(htmlString,this.virtualDocument);this.virtualDocument.innerHTML=htmlString}},{key:"appendStyleIntoDocument_",value:function appendStyleIntoDocument_(newStyle){var isTemporaryStyle=(0,_metalDom.match)(newStyle,HtmlScreen.selectors.stylesTemporary);
if(isTemporaryStyle)this.pendingStyles.push(newStyle);if(newStyle.id){var styleInDoc=_globals2.default.document.getElementById(newStyle.id);if(styleInDoc){styleInDoc.parentNode.insertBefore(newStyle,styleInDoc.nextSibling);return}}_globals2.default.document.head.appendChild(newStyle)}},{key:"assertSameBodyIdInVirtualDocument",value:function assertSameBodyIdInVirtualDocument(){var bodySurface=this.virtualDocument.querySelector("body");if(!_globals2.default.document.body.id)_globals2.default.document.body.id=
"senna_surface_"+(0,_metal.getUid)();if(bodySurface)bodySurface.id=_globals2.default.document.body.id}},{key:"copyNodeAttributesFromContent_",value:function copyNodeAttributesFromContent_(content,node){content=content.replace(/[<]\s*html/ig,"\x3csenna");content=content.replace(/\/html\s*>/ig,"/senna\x3e");var placeholder=void 0;if(_metalUseragent2.default.isIe){var tempNode=_globals2.default.document.createRange().createContextualFragment(content);placeholder=tempNode.querySelector("senna")}else{node.innerHTML=
content;placeholder=node.querySelector("senna")}if(placeholder){_utils2.default.clearNodeAttributes(node);_utils2.default.copyNodeAttributes(placeholder,node)}}},{key:"disposeInternal",value:function disposeInternal(){this.disposePendingStyles();_get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"disposeInternal",this).call(this)}},{key:"disposePendingStyles",value:function disposePendingStyles(){if(this.pendingStyles)_utils2.default.removeElementsFromDocument(this.pendingStyles)}},
{key:"evaluateScripts",value:function evaluateScripts(surfaces){var _this2=this;var evaluateTrackedScripts=this.evaluateTrackedResources_(_metalDom.globalEval.runScriptsInElement,HtmlScreen.selectors.scripts,HtmlScreen.selectors.scriptsTemporary,HtmlScreen.selectors.scriptsPermanent);return evaluateTrackedScripts.then(function(){return _get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"evaluateScripts",_this2).call(_this2,surfaces)})}},{key:"evaluateStyles",value:function evaluateStyles(surfaces){var _this3=
this;this.pendingStyles=[];var evaluateTrackedStyles=this.evaluateTrackedResources_(_metalDom.globalEvalStyles.runStylesInElement,HtmlScreen.selectors.styles,HtmlScreen.selectors.stylesTemporary,HtmlScreen.selectors.stylesPermanent,this.appendStyleIntoDocument_.bind(this));return evaluateTrackedStyles.then(function(){return _get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"evaluateStyles",_this3).call(_this3,surfaces)})}},{key:"evaluateFavicon_",value:function evaluateFavicon_(){var _this4=
this;var resourcesInVirtual=this.virtualQuerySelectorAll_(HtmlScreen.selectors.favicon);var resourcesInDocument=this.querySelectorAll_(HtmlScreen.selectors.favicon);return new _metalPromise2.default(function(resolve){_utils2.default.removeElementsFromDocument(resourcesInDocument);_this4.runFaviconInElement_(resourcesInVirtual).then(function(){return resolve()})})}},{key:"evaluateTrackedResources_",value:function evaluateTrackedResources_(evaluatorFn,selector,selectorTemporary,selectorPermanent,opt_appendResourceFn){var _this5=
this;var tracked=this.virtualQuerySelectorAll_(selector);var temporariesInDoc=this.querySelectorAll_(selectorTemporary);var permanentsInDoc=this.querySelectorAll_(selectorPermanent);permanentsInDoc.forEach(function(resource){var resourceKey=_this5.getResourceKey_(resource);if(resourceKey)HtmlScreen.permanentResourcesInDoc[resourceKey]=true});var frag=(0,_metalDom.buildFragment)();tracked.forEach(function(resource){var resourceKey=_this5.getResourceKey_(resource);if(!HtmlScreen.permanentResourcesInDoc[resourceKey])frag.appendChild(resource);
if(resourceKey&&(0,_metalDom.match)(resource,selectorPermanent))HtmlScreen.permanentResourcesInDoc[resourceKey]=true});return new _metalPromise2.default(function(resolve){evaluatorFn(frag,function(){_utils2.default.removeElementsFromDocument(temporariesInDoc);resolve()},opt_appendResourceFn)})}},{key:"flip",value:function flip(surfaces){var _this6=this;return _get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"flip",this).call(this,surfaces).then(function(){_utils2.default.clearNodeAttributes(_globals2.default.document.documentElement);
_utils2.default.copyNodeAttributes(_this6.virtualDocument,_globals2.default.document.documentElement);_this6.evaluateFavicon_();_this6.updateMetaTags_()})}},{key:"updateMetaTags_",value:function updateMetaTags_(){var currentMetaNodes=this.querySelectorAll_("meta");var metasFromVirtualDocument=this.metas;if(currentMetaNodes){_utils2.default.removeElementsFromDocument(currentMetaNodes);if(metasFromVirtualDocument)metasFromVirtualDocument.forEach(function(meta){return _globals2.default.document.head.appendChild(meta)})}}},
{key:"getResourceKey_",value:function getResourceKey_(resource){return resource.id||resource.href||resource.src||""}},{key:"getSurfaceContent",value:function getSurfaceContent(surfaceId){var surface=this.virtualDocument.querySelector("#"+surfaceId);if(surface){var defaultChild=surface.querySelector("#"+surfaceId+"-"+_Surface2.default.DEFAULT);if(defaultChild)return defaultChild.innerHTML;return surface.innerHTML}}},{key:"getTitleSelector",value:function getTitleSelector(){return this.titleSelector}},
{key:"load",value:function load(path){var _this7=this;return _get(HtmlScreen.prototype.__proto__||Object.getPrototypeOf(HtmlScreen.prototype),"load",this).call(this,path).then(function(content){_this7.allocateVirtualDocumentForContent(content);_this7.resolveTitleFromVirtualDocument();_this7.resolveMetaTagsFromVirtualDocument();_this7.assertSameBodyIdInVirtualDocument();if(_metalUseragent2.default.isIe)_this7.makeTemporaryStylesHrefsUnique_();return content})}},{key:"makeTemporaryStylesHrefsUnique_",
value:function makeTemporaryStylesHrefsUnique_(){var _this8=this;var temporariesInDoc=this.virtualQuerySelectorAll_(HtmlScreen.selectors.stylesTemporary);temporariesInDoc.forEach(function(style){return _this8.replaceStyleAndMakeUnique_(style)})}},{key:"replaceStyleAndMakeUnique_",value:function replaceStyleAndMakeUnique_(style){if(style.href){var newStyle=_globals2.default.document.createElement(style.tagName);style.href=(new _metalUri2.default(style.href)).makeUnique().toString();_utils2.default.copyNodeAttributes(style,
newStyle);style.parentNode.replaceChild(newStyle,style);style.disabled=true}}},{key:"runFaviconInElement_",value:function runFaviconInElement_(elements){return new _metalPromise2.default(function(resolve){elements.forEach(function(element){return document.head.appendChild(_metalUseragent2.default.isIe?element:_utils2.default.setElementWithRandomHref(element))});resolve()})}},{key:"virtualQuerySelectorAll_",value:function virtualQuerySelectorAll_(selector){return Array.prototype.slice.call(this.virtualDocument.querySelectorAll(selector))}},
{key:"querySelectorAll_",value:function querySelectorAll_(selector){return Array.prototype.slice.call(_globals2.default.document.querySelectorAll(selector))}},{key:"releaseVirtualDocument",value:function releaseVirtualDocument(){this.virtualDocument=null}},{key:"resolveTitleFromVirtualDocument",value:function resolveTitleFromVirtualDocument(){var title=this.virtualDocument.querySelector(this.titleSelector);if(title)this.setTitle(title.textContent.trim())}},{key:"resolveMetaTagsFromVirtualDocument",
value:function resolveMetaTagsFromVirtualDocument(){var metas=this.virtualQuerySelectorAll_(this.metaTagsSelector);if(metas)this.setMetas(metas)}},{key:"setTitleSelector",value:function setTitleSelector(titleSelector){this.titleSelector=titleSelector}}]);return HtmlScreen}(_RequestScreen3.default);var ignoreFavicon=':not([rel\x3d"Shortcut Icon"]):not([rel\x3d"shortcut icon"]):not([rel\x3d"icon"]):not([href$\x3d"favicon.icon"])';HtmlScreen.selectors={favicon:'link[rel\x3d"Shortcut Icon"],link[rel\x3d"shortcut icon"],link[rel\x3d"icon"],link[href$\x3d"favicon.icon"]',
scripts:"script[data-senna-track]",scriptsPermanent:'script[data-senna-track\x3d"permanent"]',scriptsTemporary:'script[data-senna-track\x3d"temporary"]',styles:"style[data-senna-track],link[data-senna-track]"+ignoreFavicon,stylesPermanent:'style[data-senna-track\x3d"permanent"],link[data-senna-track\x3d"permanent"]'+ignoreFavicon,stylesTemporary:'style[data-senna-track\x3d"temporary"],link[data-senna-track\x3d"temporary"]'+ignoreFavicon};HtmlScreen.permanentResourcesInDoc={};exports.default=HtmlScreen});
Liferay.Loader.define("frontend-js-spa-web@2.0.34/liferay/screen/EventScreen.es",["module","exports","require","frontend-js-spa-web$senna/lib/screen/HtmlScreen","frontend-js-spa-web$senna/lib/globals/globals","frontend-js-metal-web$metal-promise/lib/promise/Promise"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _HtmlScreen2=_interopRequireDefault(require("frontend-js-spa-web$senna/lib/screen/HtmlScreen"));
var _globals=_interopRequireDefault(require("frontend-js-spa-web$senna/lib/globals/globals"));var _Promise=require("frontend-js-metal-web$metal-promise/lib/promise/Promise");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")_typeof=function _typeof(obj){return typeof obj};else _typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==
Symbol.prototype?"symbol":typeof obj};return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,
protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function"))return call;return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _get(target,property,
receiver){if(typeof Reflect!=="undefined"&&Reflect.get)_get=Reflect.get;else _get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get)return desc.get.call(receiver);return desc.value};return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,
superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var EventScreen=function(_HtmlScreen){_inherits(EventScreen,_HtmlScreen);function EventScreen(){var _this;_classCallCheck(this,EventScreen);_this=_possibleConstructorReturn(this,_getPrototypeOf(EventScreen).call(this));_this.cacheable=false;_this.timeout=Liferay.SPA.app.timeout;return _this}_createClass(EventScreen,[{key:"dispose",value:function dispose(){_get(_getPrototypeOf(EventScreen.prototype),
"dispose",this).call(this);Liferay.fire("screenDispose",{app:Liferay.SPA.app,screen:this})}},{key:"activate",value:function activate(){_get(_getPrototypeOf(EventScreen.prototype),"activate",this).call(this);Liferay.fire("screenActivate",{app:Liferay.SPA.app,screen:this})}},{key:"addCache",value:function addCache(content){_get(_getPrototypeOf(EventScreen.prototype),"addCache",this).call(this,content);this.cacheLastModified=(new Date).getTime()}},{key:"checkRedirectPath",value:function checkRedirectPath(redirectPath){var app=
Liferay.SPA.app;if(!_globals["default"].capturedFormElement&&!app.findRoute(redirectPath))window.location.href=redirectPath}},{key:"deactivate",value:function deactivate(){_get(_getPrototypeOf(EventScreen.prototype),"deactivate",this).call(this);Liferay.fire("screenDeactivate",{app:Liferay.SPA.app,screen:this})}},{key:"beforeScreenFlip",value:function beforeScreenFlip(){Liferay.fire("beforeScreenFlip",{app:Liferay.SPA.app,screen:this})}},{key:"copyBodyAttributes",value:function copyBodyAttributes(){var virtualBody=
this.virtualDocument.querySelector("body");document.body.className=virtualBody.className;document.body.onload=virtualBody.onload}},{key:"evaluateStyles",value:function evaluateStyles(surfaces){var currentLanguageId=document.querySelector("html").lang.replace("-","_");var languageId=this.virtualDocument.lang.replace("-","_");if(currentLanguageId!==languageId){this.stylesPermanentSelector_=_HtmlScreen2["default"].selectors.stylesPermanent;this.stylesTemporarySelector_=_HtmlScreen2["default"].selectors.stylesTemporary;
this.makePermanentSelectorsTemporary_(currentLanguageId,languageId)}return _get(_getPrototypeOf(EventScreen.prototype),"evaluateStyles",this).call(this,surfaces).then(this.restoreSelectors_.bind(this))}},{key:"flip",value:function flip(surfaces){var _this2=this;this.copyBodyAttributes();return _Promise.CancellablePromise.resolve(this.beforeScreenFlip()).then(_get(_getPrototypeOf(EventScreen.prototype),"flip",this).call(this,surfaces)).then(function(){_this2.runBodyOnLoad();Liferay.fire("screenFlip",
{app:Liferay.SPA.app,screen:_this2})})}},{key:"getCache",value:function getCache(){var cache=null;var app=Liferay.SPA.app;if(app.isCacheEnabled()&&!app.isScreenCacheExpired(this))cache=_get(_getPrototypeOf(EventScreen.prototype),"getCache",this).call(this);return cache}},{key:"getCacheLastModified",value:function getCacheLastModified(){return this.cacheLastModified}},{key:"isValidResponseStatusCode",value:function isValidResponseStatusCode(statusCode){var validStatusCodes=Liferay.SPA.app.getValidStatusCodes();
return statusCode>=200&&statusCode<=500||validStatusCodes.indexOf(statusCode)>-1}},{key:"load",value:function load(path){var _this3=this;return _get(_getPrototypeOf(EventScreen.prototype),"load",this).call(this,path).then(function(content){var redirectPath=_this3.beforeUpdateHistoryPath(path);_this3.checkRedirectPath(redirectPath);Liferay.fire("screenLoad",{app:Liferay.SPA.app,content:content,screen:_this3});return content})}},{key:"makePermanentSelectorsTemporary_",value:function makePermanentSelectorsTemporary_(currentLanguageId,
languageId){_HtmlScreen2["default"].selectors.stylesTemporary=_HtmlScreen2["default"].selectors.stylesTemporary.split(",").concat(_HtmlScreen2["default"].selectors.stylesPermanent.split(",").map(function(item){return"".concat(item,'[href*\x3d"').concat(currentLanguageId,'"]')})).join();_HtmlScreen2["default"].selectors.stylesPermanent=_HtmlScreen2["default"].selectors.stylesPermanent.split(",").map(function(item){return"".concat(item,'[href*\x3d"').concat(languageId,'"]')}).join()}},{key:"restoreSelectors_",
value:function restoreSelectors_(){_HtmlScreen2["default"].selectors.stylesPermanent=this.stylesPermanentSelector_||_HtmlScreen2["default"].selectors.stylesPermanent;_HtmlScreen2["default"].selectors.stylesTemporary=this.stylesTemporarySelector_||_HtmlScreen2["default"].selectors.stylesTemporary}},{key:"runBodyOnLoad",value:function runBodyOnLoad(){var onLoad=document.body.onload;if(onLoad)onLoad()}},{key:"runFaviconInElement_",value:function runFaviconInElement_(elements){return _get(_getPrototypeOf(EventScreen.prototype),
"runFaviconInElement_",this).call(this,elements).then(function(){elements.forEach(function(element){if(!element.type&&element.href.indexOf(".ico")!==-1)element.type="image/x-icon"})})}}]);return EventScreen}(_HtmlScreen2["default"]);var _default=EventScreen;exports["default"]=_default});
Liferay.Loader.define("frontend-js-spa-web@2.0.34/liferay/screen/ActionURLScreen.es",["module","exports","require","./EventScreen.es","frontend-js-metal-web$metal-uri/lib/Uri","frontend-js-spa-web$senna/lib/utils/utils"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _EventScreen2=_interopRequireDefault(require("./EventScreen.es"));var _Uri=_interopRequireDefault(require("frontend-js-metal-web$metal-uri/lib/Uri"));
var _utils=_interopRequireDefault(require("frontend-js-spa-web$senna/lib/utils/utils"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")_typeof=function _typeof(obj){return typeof obj};else _typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj)}function _classCallCheck(instance,
Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,
protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function"))return call;return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get)_get=Reflect.get;
else _get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get)return desc.get.call(receiver);return desc.value};return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break}return object}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?
Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=
Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var ActionURLScreen=function(_EventScreen){_inherits(ActionURLScreen,_EventScreen);function ActionURLScreen(){var _this;_classCallCheck(this,ActionURLScreen);_this=_possibleConstructorReturn(this,_getPrototypeOf(ActionURLScreen).call(this));_this.httpMethod="POST";return _this}_createClass(ActionURLScreen,[{key:"getRequestPath",value:function getRequestPath(){var requestPath=null;var request=this.getRequest();
if(request){var uri=new _Uri["default"](_get(_getPrototypeOf(ActionURLScreen.prototype),"getRequestPath",this).call(this));if(uri.getParameterValue("p_p_lifecycle")==="1")uri.setParameterValue("p_p_lifecycle","0");requestPath=_utils["default"].getUrlPath(uri.toString())}return requestPath}}]);return ActionURLScreen}(_EventScreen2["default"]);var _default=ActionURLScreen;exports["default"]=_default});
Liferay.Loader.define("frontend-js-metal-web$metal-debounce@2.0.2/lib/debounce",["module","exports","require"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});function debounce(fn,delay){return function debounced(){var args=Array.prototype.slice.call(arguments,0);cancelDebounce(debounced);debounced.id=setTimeout(function(){fn.apply(null,args)},delay)}}function cancelDebounce(debounced){clearTimeout(debounced.id)}exports.default=debounce;
exports.cancelDebounce=cancelDebounce;exports.debounce=debounce});
Liferay.Loader.define("frontend-js-metal-web$metal-path-parser@1.0.4/lib/pathParser",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.parse=parse;exports.toRegex=toRegex;exports.extractData=extractData;var _metal=require("frontend-js-metal-web$metal");var _metal2=_interopRequireDefault(_metal);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
var REGEX=/([\/])?(?:(?::(\w+)(?:\(((?:\\.|[^\\()])*)\))?|\(((?:\\.|[^\\()])+)\))([+*?])?)/g;function convertMatchesToObj(matches){return{match:matches[0],prefix:matches[1],name:matches[2],paramPattern:matches[3],unnamedPattern:matches[4],modifier:matches[5]}}function convertTokensToRegex(tokens){var regex="";for(var i=0;i<tokens.length;i++)if(_metal2.default.isString(tokens[i]))regex+=escape(tokens[i]);else{var capture=encloseNonCapturingGroup(tokens[i].pattern);if(tokens[i].repeat)capture+=encloseNonCapturingGroup("\\/"+
capture)+"*";capture=escape(tokens[i].prefix)+("("+capture+")");if(tokens[i].optional){if(!tokens[i].partial)capture=encloseNonCapturingGroup(capture);capture+="?"}regex+=capture}return new RegExp("^"+makeTrailingSlashOptional(regex)+"$")}function encloseNonCapturingGroup(pattern){return"(?:"+pattern+")"}function escape(str){return str.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function makeTrailingSlashOptional(regex){if(/\/$/.test(regex))regex+="?";else regex+="\\/?";return regex}function parse(routeOrTokens){if(!_metal2.default.isString(routeOrTokens))return routeOrTokens;
var route=routeOrTokens;var unnamedCount=0;var tokens=[];var currPath="";var index=0;var matches=REGEX.exec(route);while(matches){var data=convertMatchesToObj(matches);currPath=route.slice(index,matches.index);index=matches.index+data.match.length;tokens.push(currPath);tokens.push({name:data.name?data.name:""+unnamedCount++,partial:route[index]&&route[index]!==data.prefix,prefix:data.prefix||"",pattern:data.paramPattern||data.unnamedPattern||"[^\\/]+",repeat:data.modifier==="*"||data.modifier==="+",
optional:data.modifier==="*"||data.modifier==="?"});matches=REGEX.exec(route)}if(index<route.length)tokens.push(route.substr(index));return tokens}function toRegex(routeOrTokens){return convertTokensToRegex(parse(routeOrTokens))}function extractData(routeOrTokens,path){var data={};var tokens=parse(routeOrTokens);var match=path.match(convertTokensToRegex(tokens));if(!match)return null;var paramIndex=1;for(var i=0;i<tokens.length;i++)if(!_metal2.default.isString(tokens[i])){var value=match[paramIndex++];
if(_metal2.default.isDef(value)){if(tokens[i].repeat)value=value.split("/");data[tokens[i].name]=value}}return data}});
Liferay.Loader.define("frontend-js-spa-web$senna@2.7.7/lib/route/Route",["module","exports","require","frontend-js-metal-web$metal","frontend-js-metal-web$metal-path-parser"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in
descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _metal=require("frontend-js-metal-web$metal");var _metalPathParser=require("frontend-js-metal-web$metal-path-parser");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");
}var Route=function(){function Route(path,handler){_classCallCheck(this,Route);if(!(0,_metal.isDefAndNotNull)(path))throw new Error("Route path not specified.");if(!(0,_metal.isFunction)(handler))throw new Error("Route handler is not a function.");this.handler=handler;this.path=path}_createClass(Route,[{key:"buildParsedData_",value:function buildParsedData_(){if(!this.parsedData_){var tokens=(0,_metalPathParser.parse)(this.path);var regex=(0,_metalPathParser.toRegex)(tokens);this.parsedData_={regex:regex,
tokens:tokens}}return this.parsedData_}},{key:"extractParams",value:function extractParams(path){if((0,_metal.isString)(this.path))return(0,_metalPathParser.extractData)(this.buildParsedData_().tokens,path);return{}}},{key:"getHandler",value:function getHandler(){return this.handler}},{key:"getPath",value:function getPath(){return this.path}},{key:"matchesPath",value:function matchesPath(value){var path=this.path;if((0,_metal.isFunction)(path))return path(value);if((0,_metal.isString)(path))path=
this.buildParsedData_().regex;if(path instanceof RegExp)return value.search(path)>-1;return false}}]);return Route}();exports.default=Route});
Liferay.Loader.define("frontend-js-spa-web$senna@2.7.7/lib/app/App",["module","exports","require","frontend-js-metal-web$metal-dom","frontend-js-metal-web$metal","frontend-js-metal-web$metal-events","frontend-js-metal-web$metal-promise","frontend-js-metal-web$metal-debounce","../globals/globals","../route/Route","../screen/Screen","../surface/Surface","frontend-js-metal-web$metal-uri","../utils/utils"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",
{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();
var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _metalDom=require("frontend-js-metal-web$metal-dom");var _metal=require("frontend-js-metal-web$metal");
var _metalEvents=require("frontend-js-metal-web$metal-events");var _metalPromise=require("frontend-js-metal-web$metal-promise");var _metalPromise2=_interopRequireDefault(_metalPromise);var _metalDebounce=require("frontend-js-metal-web$metal-debounce");var _metalDebounce2=_interopRequireDefault(_metalDebounce);var _globals=require("../globals/globals");var _globals2=_interopRequireDefault(_globals);var _Route=require("../route/Route");var _Route2=_interopRequireDefault(_Route);var _Screen=require("../screen/Screen");
var _Screen2=_interopRequireDefault(_Screen);var _Surface=require("../surface/Surface");var _Surface2=_interopRequireDefault(_Surface);var _metalUri=require("frontend-js-metal-web$metal-uri");var _metalUri2=_interopRequireDefault(_metalUri);var _utils=require("../utils/utils");var _utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");
}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,
enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NavigationStrategy={IMMEDIATE:"immediate",SCHEDULE_LAST:"scheduleLast"};var App=function(_EventEmitter){_inherits(App,_EventEmitter);function App(){_classCallCheck(this,App);var _this=_possibleConstructorReturn(this,(App.__proto__||Object.getPrototypeOf(App)).call(this));_this.activeScreen=null;_this.activePath=null;_this.allowPreventNavigate=
true;_this.basePath="";_this.browserPathBeforeNavigate=_utils2.default.getCurrentBrowserPathWithoutHash();_this.captureScrollPositionFromScrollEvent=true;_this.defaultTitle=_globals2.default.document.title;_this.formSelector='form[enctype\x3d"multipart/form-data"]:not([data-senna-off])';_this.ignoreQueryStringFromRoutePath=false;_this.linkSelector='a:not([data-senna-off]):not([target\x3d"_blank"])';_this.loadingCssClass="senna-loading";_this.nativeScrollRestorationSupported="scrollRestoration"in _globals2.default.window.history;
_this.navigationStrategy=NavigationStrategy.IMMEDIATE;_this.isNavigationPending=false;_this.pendingNavigate=null;_this.popstateScrollLeft=0;_this.popstateScrollTop=0;_this.redirectPath=null;_this.routes=[];_this.scheduledNavigationQueue=[];_this.screens={};_this.skipLoadPopstate=false;_this.surfaces={};_this.updateScrollPosition=true;_this.appEventHandlers_=new _metalEvents.EventHandler;_this.appEventHandlers_.add((0,_metalDom.on)(_globals2.default.window,"scroll",(0,_metalDebounce2.default)(_this.onScroll_.bind(_this),
100)),(0,_metalDom.on)(_globals2.default.window,"load",_this.onLoad_.bind(_this)),(0,_metalDom.on)(_globals2.default.window,"popstate",_this.onPopstate_.bind(_this)));_this.on("startNavigate",_this.onStartNavigate_);_this.on("beforeNavigate",_this.onBeforeNavigate_);_this.on("beforeNavigate",_this.onBeforeNavigateDefault_,true);_this.on("beforeUnload",_this.onBeforeUnloadDefault_);_this.setLinkSelector(_this.linkSelector);_this.setFormSelector(_this.formSelector);_this.maybeOverloadBeforeUnload_();
return _this}_createClass(App,[{key:"addRoutes",value:function addRoutes(routes){var _this2=this;if(!Array.isArray(routes))routes=[routes];routes.forEach(function(route){if(!(route instanceof _Route2.default))route=new _Route2.default(route.path,route.handler);_this2.routes.push(route)});return this}},{key:"addSurfaces",value:function addSurfaces(surfaces){var _this3=this;if(!Array.isArray(surfaces))surfaces=[surfaces];surfaces.forEach(function(surface){if((0,_metal.isString)(surface))surface=new _Surface2.default(surface);
_this3.surfaces[surface.getId()]=surface});return this}},{key:"canNavigate",value:function canNavigate(url){var uri=_utils2.default.isWebUri(url);if(!uri)return false;var path=_utils2.default.getUrlPath(url);if(!this.isLinkSameOrigin_(uri.getHost()))return false;if(!this.isSameBasePath_(path))return false;if(uri.getHash()&&_utils2.default.isCurrentBrowserPath(path))return false;if(!this.findRoute(path))return false;return true}},{key:"clearScreensCache",value:function clearScreensCache(){var _this4=
this;Object.keys(this.screens).forEach(function(path){if(path===_this4.activePath)_this4.activeScreen.clearCache();else if(!(_this4.isNavigationPending&&_this4.pendingNavigate.path===path))_this4.removeScreen(path)})}},{key:"createScreenInstance",value:function createScreenInstance(path,route){if(!this.pendingNavigate&&path===this.activePath)return this.activeScreen;var screen=this.screens[path];if(!screen){var handler=route.getHandler();if(handler===_Screen2.default||_Screen2.default.isImplementedBy(handler.prototype))screen=
new handler;else screen=handler(route)||new _Screen2.default}return screen}},{key:"disposeInternal",value:function disposeInternal(){if(this.activeScreen)this.removeScreen(this.activePath);this.clearScreensCache();this.formEventHandler_.removeListener();this.linkEventHandler_.removeListener();this.appEventHandlers_.removeAllListeners();_get(App.prototype.__proto__||Object.getPrototypeOf(App.prototype),"disposeInternal",this).call(this)}},{key:"dispatch",value:function dispatch(){return this.navigate(_utils2.default.getCurrentBrowserPath(),
true)}},{key:"doNavigate_",value:function doNavigate_(path,opt_replaceHistory){var _this5=this;var route=this.findRoute(path);if(!route){this.pendingNavigate=_metalPromise2.default.reject(new _metalPromise2.default.CancellationError("No route for "+path));return this.pendingNavigate}this.stopPendingNavigate_();this.isNavigationPending=true;var nextScreen=this.createScreenInstance(path,route);return this.maybePreventDeactivate_().then(function(){return _this5.maybePreventActivate_(nextScreen)}).then(function(){return nextScreen.load(path)}).then(function(){_this5.navigationStrategy=
NavigationStrategy.SCHEDULE_LAST;if(_this5.activeScreen)_this5.activeScreen.deactivate();_this5.prepareNavigateHistory_(path,nextScreen,opt_replaceHistory);_this5.prepareNavigateSurfaces_(nextScreen,_this5.surfaces,_this5.extractParams(route,path))}).then(function(){return nextScreen.evaluateStyles(_this5.surfaces)}).then(function(){return nextScreen.flip(_this5.surfaces)}).then(function(){return nextScreen.evaluateScripts(_this5.surfaces)}).then(function(){return _this5.maybeUpdateScrollPositionState_()}).then(function(){return _this5.syncScrollPositionSyncThenAsync_()}).then(function(){return _this5.finalizeNavigate_(path,
nextScreen)}).then(function(){return _this5.maybeOverloadBeforeUnload_()}).catch(function(reason){_this5.isNavigationPending=false;_this5.handleNavigateError_(path,nextScreen,reason);throw reason;}).thenAlways(function(){_this5.navigationStrategy=NavigationStrategy.IMMEDIATE;if(_this5.scheduledNavigationQueue.length){var scheduledNavigation=_this5.scheduledNavigationQueue.shift();_this5.maybeNavigate_(scheduledNavigation.href,scheduledNavigation)}})}},{key:"extractParams",value:function extractParams(route,
path){return route.extractParams(this.getRoutePath(path))}},{key:"finalizeNavigate_",value:function finalizeNavigate_(path,nextScreen){nextScreen.activate();if(this.activeScreen&&!this.activeScreen.isCacheable())if(this.activeScreen!==nextScreen)this.removeScreen(this.activePath);this.activePath=path;this.activeScreen=nextScreen;this.browserPathBeforeNavigate=_utils2.default.getCurrentBrowserPathWithoutHash();this.screens[path]=nextScreen;this.isNavigationPending=false;this.pendingNavigate=null;_globals2.default.capturedFormElement=
null;_globals2.default.capturedFormButtonElement=null}},{key:"findRoute",value:function findRoute(path){path=this.getRoutePath(path);for(var i=0;i<this.routes.length;i++){var route=this.routes[i];if(route.matchesPath(path))return route}return null}},{key:"getAllowPreventNavigate",value:function getAllowPreventNavigate(){return this.allowPreventNavigate}},{key:"getBasePath",value:function getBasePath(){return this.basePath}},{key:"getDefaultTitle",value:function getDefaultTitle(){return this.defaultTitle}},
{key:"getFormSelector",value:function getFormSelector(){return this.formSelector}},{key:"getIgnoreQueryStringFromRoutePath",value:function getIgnoreQueryStringFromRoutePath(){return this.ignoreQueryStringFromRoutePath}},{key:"getLinkSelector",value:function getLinkSelector(){return this.linkSelector}},{key:"getLoadingCssClass",value:function getLoadingCssClass(){return this.loadingCssClass}},{key:"getRoutePath",value:function getRoutePath(path){if(this.getIgnoreQueryStringFromRoutePath()){path=_utils2.default.getUrlPathWithoutHashAndSearch(path);
return _utils2.default.getUrlPathWithoutHashAndSearch(path.substr(this.basePath.length))}path=_utils2.default.getUrlPathWithoutHash(path);return _utils2.default.getUrlPathWithoutHash(path.substr(this.basePath.length))}},{key:"getUpdateScrollPosition",value:function getUpdateScrollPosition(){return this.updateScrollPosition}},{key:"handleNavigateError_",value:function handleNavigateError_(path,nextScreen,error){var _this6=this;this.emit("navigationError",{error:error,nextScreen:nextScreen,path:path});
if(!_utils2.default.isCurrentBrowserPath(path))if(this.isNavigationPending&&this.pendingNavigate)this.pendingNavigate.thenAlways(function(){return _this6.removeScreen(path)},this);else this.removeScreen(path)}},{key:"hasRoutes",value:function hasRoutes(){return this.routes.length>0}},{key:"isLinkSameOrigin_",value:function isLinkSameOrigin_(host){var hostUri=new _metalUri2.default(host);var locationHostUri=new _metalUri2.default(_globals2.default.window.location.host);return hostUri.getPort()===locationHostUri.getPort()&&
hostUri.getHostname()===locationHostUri.getHostname()}},{key:"isSameBasePath_",value:function isSameBasePath_(path){return path.indexOf(this.basePath)===0}},{key:"lockHistoryScrollPosition_",value:function lockHistoryScrollPosition_(){var state=_globals2.default.window.history.state;if(!state)return;var winner=false;var switchScrollPositionRace=function switchScrollPositionRace(){_globals2.default.document.removeEventListener("scroll",switchScrollPositionRace,false);if(!winner){_globals2.default.window.scrollTo(state.scrollLeft,
state.scrollTop);winner=true}};_metal.async.nextTick(switchScrollPositionRace);_globals2.default.document.addEventListener("scroll",switchScrollPositionRace,false)}},{key:"maybeDisableNativeScrollRestoration",value:function maybeDisableNativeScrollRestoration(){if(this.nativeScrollRestorationSupported){this.nativeScrollRestoration_=_globals2.default.window.history.scrollRestoration;_globals2.default.window.history.scrollRestoration="manual"}}},{key:"maybeScheduleNavigation_",value:function maybeScheduleNavigation_(href,
event){if(this.isNavigationPending&&this.navigationStrategy===NavigationStrategy.SCHEDULE_LAST){this.scheduledNavigationQueue=[_metal.object.mixin({href:href,isScheduledNavigation:true},event)];return true}return false}},{key:"maybeNavigate_",value:function maybeNavigate_(href,event){if(!this.canNavigate(href))return;var isNavigationScheduled=this.maybeScheduleNavigation_(href,event);if(isNavigationScheduled){event.preventDefault();return}var navigateFailed=false;try{this.navigate(_utils2.default.getUrlPath(href),
false,event)}catch(err){navigateFailed=true}if(!navigateFailed&&!event.isScheduledNavigation)event.preventDefault()}},{key:"maybeOverloadBeforeUnload_",value:function maybeOverloadBeforeUnload_(){var _this7=this;if("function"===typeof window.onbeforeunload){window._onbeforeunload=window.onbeforeunload;window.onbeforeunload=function(event){_this7.emit("beforeUnload",event);if(event&&event.defaultPrevented)return true};window.onbeforeunload._overloaded=true}}},{key:"maybePreventActivate_",value:function maybePreventActivate_(nextScreen){var _this8=
this;return _metalPromise2.default.resolve().then(function(){return nextScreen.beforeActivate()}).then(function(prevent){if(prevent){_this8.pendingNavigate=_metalPromise2.default.reject(new _metalPromise2.default.CancellationError("Cancelled by next screen"));return _this8.pendingNavigate}})}},{key:"maybePreventDeactivate_",value:function maybePreventDeactivate_(){var _this9=this;return _metalPromise2.default.resolve().then(function(){if(_this9.activeScreen)return _this9.activeScreen.beforeDeactivate()}).then(function(prevent){if(prevent){_this9.pendingNavigate=
_metalPromise2.default.reject(new _metalPromise2.default.CancellationError("Cancelled by active screen"));return _this9.pendingNavigate}})}},{key:"maybeRepositionScrollToHashedAnchor",value:function maybeRepositionScrollToHashedAnchor(){var hash=_globals2.default.window.location.hash;if(hash){var anchorElement=_globals2.default.document.getElementById(hash.substring(1));if(anchorElement){var _utils$getNodeOffset=_utils2.default.getNodeOffset(anchorElement),offsetLeft=_utils$getNodeOffset.offsetLeft,
offsetTop=_utils$getNodeOffset.offsetTop;_globals2.default.window.scrollTo(offsetLeft,offsetTop)}}}},{key:"maybeRestoreNativeScrollRestoration",value:function maybeRestoreNativeScrollRestoration(){if(this.nativeScrollRestorationSupported&&this.nativeScrollRestoration_)_globals2.default.window.history.scrollRestoration=this.nativeScrollRestoration_}},{key:"maybeRestoreRedirectPathHash_",value:function maybeRestoreRedirectPathHash_(path,redirectPath,hash){if(redirectPath===_utils2.default.getUrlPathWithoutHash(path))return redirectPath+
hash;return redirectPath}},{key:"maybeUpdateScrollPositionState_",value:function maybeUpdateScrollPositionState_(){var hash=_globals2.default.window.location.hash;var anchorElement=_globals2.default.document.getElementById(hash.substring(1));if(anchorElement){var _utils$getNodeOffset2=_utils2.default.getNodeOffset(anchorElement),offsetLeft=_utils$getNodeOffset2.offsetLeft,offsetTop=_utils$getNodeOffset2.offsetTop;this.saveHistoryCurrentPageScrollPosition_(offsetTop,offsetLeft)}}},{key:"navigate",
value:function navigate(path,opt_replaceHistory,opt_event){if(!_utils2.default.isHtml5HistorySupported())throw new Error("HTML5 History is not supported. Senna will not intercept navigation.");if(opt_event){_globals2.default.capturedFormElement=opt_event.capturedFormElement;_globals2.default.capturedFormButtonElement=opt_event.capturedFormButtonElement}if(path===this.activePath)opt_replaceHistory=true;this.emit("beforeNavigate",{event:opt_event,path:path,replaceHistory:!!opt_replaceHistory});return this.pendingNavigate}},
{key:"onBeforeNavigate_",value:function onBeforeNavigate_(event){if(_globals2.default.capturedFormElement)event.form=_globals2.default.capturedFormElement}},{key:"onBeforeNavigateDefault_",value:function onBeforeNavigateDefault_(event){if(this.pendingNavigate)if(this.pendingNavigate.path===event.path||this.navigationStrategy===NavigationStrategy.SCHEDULE_LAST)return;this.emit("beforeUnload",event);this.emit("startNavigate",{form:event.form,path:event.path,replaceHistory:event.replaceHistory})}},{key:"onBeforeUnloadDefault_",
value:function onBeforeUnloadDefault_(event){var func=window._onbeforeunload;if(func&&!func._overloaded&&func())event.preventDefault()}},{key:"onDocClickDelegate_",value:function onDocClickDelegate_(event){if(event.altKey||event.ctrlKey||event.metaKey||event.shiftKey||event.button)return;this.maybeNavigate_(event.delegateTarget.href,event)}},{key:"onDocSubmitDelegate_",value:function onDocSubmitDelegate_(event){var form=event.delegateTarget;if(form.method==="get")return;event.capturedFormElement=
form;var buttonSelector="button:not([type]),button[type\x3dsubmit],input[type\x3dsubmit]";if((0,_metalDom.match)(_globals2.default.document.activeElement,buttonSelector))event.capturedFormButtonElement=_globals2.default.document.activeElement;else event.capturedFormButtonElement=form.querySelector(buttonSelector);this.maybeNavigate_(form.action,event)}},{key:"onLoad_",value:function onLoad_(){var _this10=this;this.skipLoadPopstate=true;setTimeout(function(){_this10.skipLoadPopstate=false},0);this.maybeRepositionScrollToHashedAnchor()}},
{key:"onPopstate_",value:function onPopstate_(event){if(this.skipLoadPopstate)return;if(_utils2.default.isCurrentBrowserPath(this.browserPathBeforeNavigate)){this.maybeRepositionScrollToHashedAnchor();return}var state=event.state;if(!state){if(_globals2.default.window.location.hash){if(this.redirectPath&&!_utils2.default.isCurrentBrowserPath(this.redirectPath))this.reloadPage();this.maybeRepositionScrollToHashedAnchor()}else this.reloadPage();return}if(state.senna){this.popstateScrollTop=state.scrollTop;
this.popstateScrollLeft=state.scrollLeft;if(!this.nativeScrollRestorationSupported)this.lockHistoryScrollPosition_();this.once("endNavigate",function(){if(state.referrer)_utils2.default.setReferrer(state.referrer)});var uri=new _metalUri2.default(state.path);uri.setHostname(_globals2.default.window.location.hostname);uri.setPort(_globals2.default.window.location.port);var isNavigationScheduled=this.maybeScheduleNavigation_(uri.toString(),{});if(isNavigationScheduled)return;this.navigate(state.path,
true)}}},{key:"onScroll_",value:function onScroll_(){if(this.captureScrollPositionFromScrollEvent)this.saveHistoryCurrentPageScrollPosition_(_globals2.default.window.pageYOffset,_globals2.default.window.pageXOffset)}},{key:"onStartNavigate_",value:function onStartNavigate_(event){var _this11=this;this.maybeDisableNativeScrollRestoration();this.captureScrollPositionFromScrollEvent=false;(0,_metalDom.addClasses)(_globals2.default.document.documentElement,this.loadingCssClass);var endNavigatePayload=
{form:event.form,path:event.path};this.pendingNavigate=this.doNavigate_(event.path,event.replaceHistory).catch(function(reason){endNavigatePayload.error=reason;throw reason;}).thenAlways(function(){if(!_this11.pendingNavigate&&!_this11.scheduledNavigationQueue.length){(0,_metalDom.removeClasses)(_globals2.default.document.documentElement,_this11.loadingCssClass);_this11.maybeRestoreNativeScrollRestoration();_this11.captureScrollPositionFromScrollEvent=true}_this11.emit("endNavigate",endNavigatePayload)});
this.pendingNavigate.path=event.path}},{key:"prefetch",value:function prefetch(path){var _this12=this;var route=this.findRoute(path);if(!route)return _metalPromise2.default.reject(new _metalPromise2.default.CancellationError("No route for "+path));var nextScreen=this.createScreenInstance(path,route);return nextScreen.load(path).then(function(){return _this12.screens[path]=nextScreen}).catch(function(reason){_this12.handleNavigateError_(path,nextScreen,reason);throw reason;})}},{key:"prepareNavigateHistory_",
value:function prepareNavigateHistory_(path,nextScreen,opt_replaceHistory){var title=nextScreen.getTitle();if(!(0,_metal.isString)(title))title=this.getDefaultTitle();var redirectPath=nextScreen.beforeUpdateHistoryPath(path);var historyState={form:(0,_metal.isDefAndNotNull)(_globals2.default.capturedFormElement),path:path,redirectPath:redirectPath,scrollLeft:0,scrollTop:0,senna:true};if(opt_replaceHistory){historyState.scrollTop=this.popstateScrollTop;historyState.scrollLeft=this.popstateScrollLeft}var hash=
(new _metalUri2.default(path)).getHash();redirectPath=this.maybeRestoreRedirectPathHash_(path,redirectPath,hash);this.updateHistory_(title,redirectPath,nextScreen.beforeUpdateHistoryState(historyState),opt_replaceHistory);this.redirectPath=redirectPath}},{key:"prepareNavigateSurfaces_",value:function prepareNavigateSurfaces_(nextScreen,surfaces,params){Object.keys(surfaces).forEach(function(id){var surfaceContent=nextScreen.getSurfaceContent(id,params);surfaces[id].addContent(nextScreen.getId(),surfaceContent)})}},
{key:"reloadPage",value:function reloadPage(){_globals2.default.window.location.reload()}},{key:"removeRoute",value:function removeRoute(route){return _metal.array.remove(this.routes,route)}},{key:"removeScreen",value:function removeScreen(path){var _this13=this;var screen=this.screens[path];if(screen){Object.keys(this.surfaces).forEach(function(surfaceId){return _this13.surfaces[surfaceId].remove(screen.getId())});screen.dispose();delete this.screens[path]}}},{key:"saveHistoryCurrentPageScrollPosition_",
value:function saveHistoryCurrentPageScrollPosition_(scrollTop,scrollLeft){var state=_globals2.default.window.history.state;if(state&&state.senna){var _ref=[scrollTop,scrollLeft];state.scrollTop=_ref[0];state.scrollLeft=_ref[1];_globals2.default.window.history.replaceState(state,null,null)}}},{key:"setAllowPreventNavigate",value:function setAllowPreventNavigate(allowPreventNavigate){this.allowPreventNavigate=allowPreventNavigate}},{key:"setBasePath",value:function setBasePath(basePath){this.basePath=
_utils2.default.removePathTrailingSlash(basePath)}},{key:"setDefaultTitle",value:function setDefaultTitle(defaultTitle){this.defaultTitle=defaultTitle}},{key:"setFormSelector",value:function setFormSelector(formSelector){this.formSelector=formSelector;if(this.formEventHandler_)this.formEventHandler_.removeListener();this.formEventHandler_=(0,_metalDom.delegate)(document,"submit",this.formSelector,this.onDocSubmitDelegate_.bind(this),this.allowPreventNavigate)}},{key:"setIgnoreQueryStringFromRoutePath",
value:function setIgnoreQueryStringFromRoutePath(ignoreQueryStringFromRoutePath){this.ignoreQueryStringFromRoutePath=ignoreQueryStringFromRoutePath}},{key:"setLinkSelector",value:function setLinkSelector(linkSelector){this.linkSelector=linkSelector;if(this.linkEventHandler_)this.linkEventHandler_.removeListener();this.linkEventHandler_=(0,_metalDom.delegate)(document,"click",this.linkSelector,this.onDocClickDelegate_.bind(this),this.allowPreventNavigate)}},{key:"setLoadingCssClass",value:function setLoadingCssClass(loadingCssClass){this.loadingCssClass=
loadingCssClass}},{key:"setUpdateScrollPosition",value:function setUpdateScrollPosition(updateScrollPosition){this.updateScrollPosition=updateScrollPosition}},{key:"stopPendingNavigate_",value:function stopPendingNavigate_(){if(this.pendingNavigate)this.pendingNavigate.cancel("Cancel pending navigation");this.pendingNavigate=null}},{key:"syncScrollPositionSyncThenAsync_",value:function syncScrollPositionSyncThenAsync_(){var _this14=this;var state=_globals2.default.window.history.state;if(!state)return;
var scrollTop=state.scrollTop;var scrollLeft=state.scrollLeft;var sync=function sync(){if(_this14.updateScrollPosition)_globals2.default.window.scrollTo(scrollLeft,scrollTop)};return new _metalPromise2.default(function(resolve){return sync()&_metal.async.nextTick(function(){return sync()&resolve()})})}},{key:"updateHistory_",value:function updateHistory_(title,path,state,opt_replaceHistory){var referrer=_globals2.default.window.location.href;if(state)state.referrer=referrer;if(opt_replaceHistory)_globals2.default.window.history.replaceState(state,
title,path);else _globals2.default.window.history.pushState(state,title,path);_utils2.default.setReferrer(referrer);var titleNode=_globals2.default.document.querySelector("title");if(titleNode)titleNode.innerHTML=title;else _globals2.default.document.title=title}}]);return App}(_metalEvents.EventEmitter);exports.default=App});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/events/events",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.addListenersFromObj=addListenersFromObj;exports.getComponentFn=getComponentFn;var _metal=require("frontend-js-metal-web$metal");function addListenersFromObj(component,events){var eventNames=Object.keys(events||{});var handles=[];for(var i=
0;i<eventNames.length;i++){var info=extractListenerInfo_(component,events[eventNames[i]]);if(info.fn){var handle=void 0;if(info.selector)handle=component.delegate(eventNames[i],info.selector,info.fn);else handle=component.on(eventNames[i],info.fn);handles.push(handle)}}return handles}function extractListenerInfo_(component,value){var info={fn:value};if((0,_metal.isObject)(value)&&!(0,_metal.isFunction)(value)){info.selector=value.selector;info.fn=value.fn}if((0,_metal.isString)(info.fn))info.fn=getComponentFn(component,
info.fn);return info}function getComponentFn(component,fnName){if((0,_metal.isFunction)(component[fnName]))return component[fnName].bind(component);else console.error("No function named "+fnName+' was found in the component\n\t\t\t"'+(0,_metal.getFunctionName)(component.constructor)+'". Make sure that you specify\n\t\t\tvalid function names when adding inline listeners')}});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/sync/sync",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.syncState=syncState;var _metal=require("frontend-js-metal-web$metal");var SYNC_FNS_KEY="__METAL_SYNC_FNS__";function getSyncFns_(component){var ctor=component.constructor;if(ctor.hasOwnProperty(SYNC_FNS_KEY))return ctor[SYNC_FNS_KEY];var fns=
{};var keys=component.getDataManager().getSyncKeys(component);var canCache=true;for(var i=0;i<keys.length;i++){var name="sync"+keys[i].charAt(0).toUpperCase()+keys[i].slice(1);var fn=component[name];if(fn){fns[keys[i]]=fn;canCache=canCache&&component.constructor.prototype[name]}}if(canCache)ctor[SYNC_FNS_KEY]=fns;return fns}function syncState(component,changes){var syncFns=getSyncFns_(component);var keys=Object.keys(changes||syncFns);for(var i=0;i<keys.length;i++){var fn=syncFns[keys[i]];if((0,_metal.isFunction)(fn)){var change=
changes&&changes[keys[i]];var manager=component.getDataManager();fn.call(component,change?change.newVal:manager.get(component,keys[i]),change?change.prevVal:undefined)}}}});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.16.8/lib/validators",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _metal=require("frontend-js-metal-web$metal");
var ERROR_OBJECT_OF_TYPE="Expected object of one type.";var ERROR_ONE_OF="Expected one of the following values:";var ERROR_ONE_OF_TYPE="Expected one of given types.";var validators={any:function any(){return function(){return true}},array:buildTypeValidator("array"),bool:buildTypeValidator("boolean"),func:buildTypeValidator("function"),number:buildTypeValidator("number"),object:buildTypeValidator("object"),string:buildTypeValidator("string"),arrayOf:function arrayOf(validator){if(isInvalid(validators.func(validator)))throwConfigError("function",
validator,"arrayOf");return maybe(function(value,name,context){var result=validators.array(value,name,context);if(isInvalid(result))return result;return validateArrayItems(validator,value,name,context)})},inRange:function inRange(min,max){var minResult=validators.number(min);var maxResult=validators.number(max);if(isInvalid(minResult))return minResult;if(isInvalid(maxResult))return maxResult;return maybe(function(value){var valueResult=validators.number(value);if(isInvalid(valueResult))return valueResult;
return value>=min&&value<=max})},instanceOf:function instanceOf(expectedClass){return maybe(function(value,name,context){if(value instanceof expectedClass)return true;return composeError("Expected instance of "+expectedClass,name,context)})},objectOf:function objectOf(validator){if(isInvalid(validators.func(validator)))throwConfigError("function",validator,"objectOf");return maybe(function(value,name,context){for(var key in value)if(isInvalid(validator(value[key])))return composeError(ERROR_OBJECT_OF_TYPE,
name,context);return true})},oneOf:function oneOf(arrayOfValues){return maybe(function(value,name,context){var result=validators.array(arrayOfValues,name,context);if(isInvalid(result))return result;return arrayOfValues.indexOf(value)===-1?composeError(composeOneOfErrorMessage(arrayOfValues),name,context):true})},oneOfType:function oneOfType(arrayOfTypeValidators){return maybe(function(value,name,context){var result=validators.array(arrayOfTypeValidators,name,context);if(isInvalid(result))return result;
for(var i=0;i<arrayOfTypeValidators.length;i++)if(!isInvalid(arrayOfTypeValidators[i](value,name,context)))return true;return composeError(ERROR_ONE_OF_TYPE,name,context)})},shapeOf:function shapeOf(shape){if(isInvalid(validators.object(shape)))throwConfigError("object",shape,"shapeOf");return maybe(function(value,name,context){var valueResult=validators.object(value,name,context);if(isInvalid(valueResult))return valueResult;for(var key in shape)if(Object.prototype.hasOwnProperty.call(shape,key)){var validator=
shape[key];var required=false;if(validator.config){required=validator.config.required;validator=validator.config.validator}if(required&&!(0,_metal.isDefAndNotNull)(value[key])||isInvalid(validator(value[key])))return validator(value[key],name+"."+key,context)}return true})}};function buildTypeValidator(expectedType){var validatorFn=maybe(validateType.bind(null,expectedType));return function(){if(arguments.length===0)return validatorFn;else return validatorFn.apply(undefined,arguments)}}function composeError(error,
name,context){var compName=context?(0,_metal.getFunctionName)(context.constructor):null;var renderer=context&&context.getRenderer&&context.getRenderer();var parent=renderer&&renderer.getParent&&renderer.getParent();var parentName=parent?(0,_metal.getFunctionName)(parent.constructor):null;var location=parentName?"Check render method of '"+parentName+"'.":"";return new Error("Invalid state passed to '"+name+"'."+(" "+error+" Passed to '"+compName+"'. "+location))}function composeOneOfErrorMessage(arrayOfValues){return ERROR_ONE_OF+
" "+JSON.stringify(arrayOfValues)+"."}function getType(value){return Array.isArray(value)?"array":typeof value==="undefined"?"undefined":_typeof(value)}function isInvalid(result){return result instanceof Error}function maybe(typeValidator){return function(value,name,context){return(0,_metal.isDefAndNotNull)(value)?typeValidator(value,name,context):true}}function throwConfigError(expectedType,value,name){var type=getType(value);throw new Error("Expected type "+expectedType+", but received type "+type+
". passed to "+name+".");}function validateArrayItems(validator,value,name,context){for(var i=0;i<value.length;i++)if(isInvalid(validator(value[i],name,context))){var itemValidatorError=validator(value[i],name,context);var errorMessage="Validator for "+name+"["+i+'] says: "'+itemValidatorError+'"';return composeError(errorMessage,name,context)}return true}function validateType(expectedType,value,name,context){var type=getType(value);if(type!==expectedType)return composeError("Expected type '"+expectedType+
"', but received type '"+type+"'.",name,context);return true}exports.default=validators});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.16.8/lib/Config",["module","exports","require","./validators"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _validators=require("./validators");var _validators2=_interopRequireDefault(_validators);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Config={any:setPrimitiveValidators("any"),array:setPrimitiveValidators("array"),arrayOf:setNestedValidators("arrayOf"),
bool:setPrimitiveValidators("bool"),func:setPrimitiveValidators("func"),inRange:function inRange(min,max){return this.validator(_validators2.default.inRange(min,max))},instanceOf:setExplicitValueValidators("instanceOf"),number:setPrimitiveValidators("number"),object:setPrimitiveValidators("object"),objectOf:setNestedValidators("objectOf"),oneOf:setExplicitValueValidators("oneOf"),oneOfType:function oneOfType(validatorArray){validatorArray=validatorArray.map(function(configObj){return configObj.config.validator});
return this.validator(_validators2.default.oneOfType(validatorArray))},shapeOf:function shapeOf(shapeObj){shapeObj=destructShapeOfConfigs(shapeObj);return this.validator(_validators2.default.shapeOf(shapeObj))},string:setPrimitiveValidators("string"),internal:function internal(){var internal=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return mergeConfig(this,{internal:internal})},required:function required(){var required=arguments.length>0&&arguments[0]!==undefined?arguments[0]:
true;return mergeConfig(this,{required:required})},setter:function setter(_setter){return mergeConfig(this,{setter:_setter})},validator:function validator(_validator){return mergeConfig(this,{validator:_validator})},value:function value(_value){return mergeConfig(this,{value:_value})},valueFn:function valueFn(_valueFn){return mergeConfig(this,{valueFn:_valueFn})},writeOnce:function writeOnce(){var writeOnce=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return mergeConfig(this,{writeOnce:writeOnce})}};
function destructShapeOfConfigs(shape){var keys=Object.keys(shape);var retShape={};keys.forEach(function(key){var value=shape[key];retShape[key]=value.config&&value.config.validator?value.config.validator:destructShapeOfConfigs(value)});return retShape}function mergeConfig(context,config){var obj=context;var objConfig=obj.config||{};obj=Object.create(Config);obj.config={};Object.assign(obj.config,objConfig,config);return obj}function setExplicitValueValidators(name){return function(arg){return this.validator(_validators2.default[name](arg))}}
function setNestedValidators(name){return function(arg){return this.validator(_validators2.default[name](arg.config.validator))}}function setPrimitiveValidators(name){return function(){return this.validator(_validators2.default[name])}}exports.default=Config});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.16.8/lib/State",["module","exports","require","frontend-js-metal-web$metal","frontend-js-metal-web$metal-events"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=
true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;
else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _metal=require("frontend-js-metal-web$metal");var _metalEvents=require("frontend-js-metal-web$metal-events");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=
superClass}var State=function(_EventEmitter){_inherits(State,_EventEmitter);function State(config,obj,context){_classCallCheck(this,State);var _this=_possibleConstructorReturn(this,(State.__proto__||Object.getPrototypeOf(State)).call(this));_this.context_=context||_this;_this.keysBlacklist_=null;_this.obj_=obj||_this;_this.eventData_=null;_this.scheduledBatchData_=null;_this.stateInfo_={};_this.stateConfigs_={};_this.initialValues_=_metal.object.mixin({},config);_this.setShouldUseFacade(true);_this.configStateFromStaticHint_();
Object.defineProperty(_this.obj_,State.STATE_REF_KEY,{configurable:true,enumerable:false,value:_this});return _this}_createClass(State,[{key:"assertGivenIfRequired_",value:function assertGivenIfRequired_(name){var config=this.stateConfigs_[name];if(config.required){var info=this.getStateInfo(name);var value=info.state===State.KeyStates.INITIALIZED?this.get(name):this.initialValues_[name];if(!(0,_metal.isDefAndNotNull)(value)){var errorMessage='The property called "'+name+"\" is required but didn't receive a value.";
if(this.shouldThrowValidationError())throw new Error(errorMessage);else console.error(errorMessage)}}}},{key:"assertValidatorReturnInstanceOfError_",value:function assertValidatorReturnInstanceOfError_(validatorReturn){if(validatorReturn instanceof Error)if(this.shouldThrowValidationError())throw validatorReturn;else console.error("Warning: "+validatorReturn)}},{key:"assertValidStateKeyName_",value:function assertValidStateKeyName_(name){if(this.keysBlacklist_&&this.keysBlacklist_[name])throw new Error("It's not allowed to create a state key with the name \""+
name+'".');}},{key:"buildKeyPropertyDef_",value:function buildKeyPropertyDef_(name){return{configurable:true,enumerable:true,get:function get(){return this[State.STATE_REF_KEY].getStateKeyValue_(name)},set:function set(val){this[State.STATE_REF_KEY].setStateKeyValue_(name,val)}}}},{key:"callFunction_",value:function callFunction_(fn,args){if((0,_metal.isString)(fn))return this.context_[fn].apply(this.context_,args);else if((0,_metal.isFunction)(fn))return fn.apply(this.context_,args)}},{key:"callSetter_",
value:function callSetter_(name,value,currentValue){var config=this.stateConfigs_[name];if(config.setter)value=this.callFunction_(config.setter,[value,currentValue]);return value}},{key:"callValidator_",value:function callValidator_(name,value){var config=this.stateConfigs_[name];if(config.validator){var validatorReturn=this.callFunction_(config.validator,[value,name,this.context_]);this.assertValidatorReturnInstanceOfError_(validatorReturn);return validatorReturn}return true}},{key:"canSetState",
value:function canSetState(name){var info=this.getStateInfo(name);return!this.stateConfigs_[name].writeOnce||!info.written}},{key:"configState",value:function configState(configs,context){var names=Object.keys(configs);if(names.length===0)return;if(context!==false){var props={};for(var i=0;i<names.length;i++){var name=names[i];this.assertValidStateKeyName_(name);props[name]=this.buildKeyPropertyDef_(name)}Object.defineProperties(context||this.obj_,props)}this.stateConfigs_=configs;for(var _i=0;_i<
names.length;_i++){var _name=names[_i];configs[_name]=configs[_name].config?configs[_name].config:configs[_name];this.assertGivenIfRequired_(names[_i]);this.validateInitialValue_(names[_i])}}},{key:"configStateFromStaticHint_",value:function configStateFromStaticHint_(){var ctor=this.constructor;if(ctor!==State){var defineContext=void 0;if(this.obj_===this){var staticKey=State.STATE_STATIC_HINT_CONFIGURED;ctor[staticKey]=ctor[staticKey]||{};defineContext=ctor[staticKey][ctor.name]?false:ctor.prototype;
ctor[staticKey][ctor.name]=true}this.configState(State.getStateStatic(ctor),defineContext)}}},{key:"disposeInternal",value:function disposeInternal(){_get(State.prototype.__proto__||Object.getPrototypeOf(State.prototype),"disposeInternal",this).call(this);this.initialValues_=null;this.stateInfo_=null;this.stateConfigs_=null;this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function emitBatchEvent_(){if(!this.isDisposed()){this.context_.emit("stateWillChange",this.scheduledBatchData_);var data=
this.scheduledBatchData_;this.scheduledBatchData_=null;this.context_.emit("stateChanged",data)}}},{key:"get",value:function get(name){return this.obj_[name]}},{key:"getState",value:function getState(){var names=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.getStateKeys();var state={};for(var i=0;i<names.length;i++)state[names[i]]=this.get(names[i]);return state}},{key:"getStateInfo",value:function getStateInfo(name){if(!this.stateInfo_[name])this.stateInfo_[name]={};return this.stateInfo_[name]}},
{key:"getStateKeyConfig",value:function getStateKeyConfig(name){return this.stateConfigs_?this.stateConfigs_[name]:null}},{key:"getStateKeys",value:function getStateKeys(){return this.stateConfigs_?Object.keys(this.stateConfigs_):[]}},{key:"getStateKeyValue_",value:function getStateKeyValue_(name){if(!this.warnIfDisposed_(name)){this.initStateKey_(name);return this.getStateInfo(name).value}}},{key:"hasBeenSet",value:function hasBeenSet(name){var info=this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZED||
this.hasInitialValue_(name)}},{key:"hasInitialValue_",value:function hasInitialValue_(name){return this.initialValues_.hasOwnProperty(name)&&(0,_metal.isDef)(this.initialValues_[name])}},{key:"hasStateKey",value:function hasStateKey(key){if(!this.warnIfDisposed_(key))return!!this.stateConfigs_[key]}},{key:"informChange_",value:function informChange_(name,prevVal){if(this.shouldInformChange_(name,prevVal)){var data=_metal.object.mixin({key:name,newVal:this.get(name),prevVal:prevVal},this.eventData_);
this.context_.emit(name+"Changed",data);this.context_.emit("stateKeyChanged",data);this.scheduleBatchEvent_(data)}}},{key:"initStateKey_",value:function initStateKey_(name){var info=this.getStateInfo(name);if(info.state!==State.KeyStates.UNINITIALIZED)return;info.state=State.KeyStates.INITIALIZING;this.setInitialValue_(name);if(!info.written)this.setDefaultValue(name);info.state=State.KeyStates.INITIALIZED}},{key:"removeStateKey",value:function removeStateKey(name){this.stateInfo_[name]=null;this.stateConfigs_[name]=
null;delete this.obj_[name]}},{key:"scheduleBatchEvent_",value:function scheduleBatchEvent_(changeData){if(!this.scheduledBatchData_){_metal.async.nextTick(this.emitBatchEvent_,this);this.scheduledBatchData_=_metal.object.mixin({changes:{}},this.eventData_)}var name=changeData.key;var changes=this.scheduledBatchData_.changes;if(changes[name])changes[name].newVal=changeData.newVal;else changes[name]=changeData}},{key:"set",value:function set(name,value){if(this.hasStateKey(name))this.obj_[name]=value}},
{key:"setDefaultValue",value:function setDefaultValue(name){var config=this.stateConfigs_[name];if(config.value!==undefined)this.set(name,config.value);else this.set(name,this.callFunction_(config.valueFn))}},{key:"setEventData",value:function setEventData(data){this.eventData_=data}},{key:"setInitialValue_",value:function setInitialValue_(name){if(this.hasInitialValue_(name)){this.set(name,this.initialValues_[name]);this.initialValues_[name]=undefined}}},{key:"setKeysBlacklist",value:function setKeysBlacklist(blacklist){this.keysBlacklist_=
blacklist}},{key:"setState",value:function setState(values,callback){var _this2=this;Object.keys(values).forEach(function(name){return _this2.set(name,values[name])});if(callback&&this.scheduledBatchData_)this.context_.once("stateChanged",callback)}},{key:"setStateKeyValue_",value:function setStateKeyValue_(name,value){if(this.warnIfDisposed_(name)||!this.canSetState(name)||!this.validateKeyValue_(name,value))return;var prevVal=this.get(name);var info=this.getStateInfo(name);info.value=this.callSetter_(name,
value,prevVal);this.assertGivenIfRequired_(name);info.written=true;this.informChange_(name,prevVal)}},{key:"shouldInformChange_",value:function shouldInformChange_(name,prevVal){var info=this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZED&&((0,_metal.isObject)(prevVal)||prevVal!==this.get(name))}},{key:"shouldThrowValidationError",value:function shouldThrowValidationError(){return false}},{key:"validateInitialValue_",value:function validateInitialValue_(name){if(this.initialValues_.hasOwnProperty(name)&&
!this.callValidator_(name,this.initialValues_[name]))delete this.initialValues_[name]}},{key:"validateKeyValue_",value:function validateKeyValue_(name,value){var info=this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZING||this.callValidator_(name,value)}},{key:"warnIfDisposed_",value:function warnIfDisposed_(name){var disposed=this.isDisposed();if(disposed)console.warn('Error. Trying to access property "'+name+'" on disposed instance');return disposed}}],[{key:"getStateStatic",
value:function getStateStatic(ctor){return(0,_metal.getStaticProperty)(ctor,"STATE",State.mergeState)}},{key:"mergeState",value:function mergeState(mergedVal,currVal){return _metal.object.mixin({},currVal,mergedVal)}}]);return State}(_metalEvents.EventEmitter);State.STATE_REF_KEY="__METAL_STATE_REF_KEY__";State.STATE_STATIC_HINT_CONFIGURED="__METAL_STATE_STATIC_HINT_CONFIGURED__";State.KeyStates={UNINITIALIZED:undefined,INITIALIZING:1,INITIALIZED:2};exports.default=State});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.16.8/lib/all/state",["module","exports","require","../validators","../Config","../State"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.State=exports.Config=exports.validators=undefined;var _validators=require("../validators");var _validators2=_interopRequireDefault(_validators);var _Config=require("../Config");var _Config2=_interopRequireDefault(_Config);var _State=
require("../State");var _State2=_interopRequireDefault(_State);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_State2.default;exports.validators=_validators2.default;exports.Config=_Config2.default;exports.State=_State2.default});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/ComponentDataManager",["module","exports","require","frontend-js-metal-web$metal","frontend-js-metal-web$metal-state"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=
true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _metal=require("frontend-js-metal-web$metal");var _metalState=require("frontend-js-metal-web$metal-state");var _metalState2=_interopRequireDefault(_metalState);function _interopRequireDefault(obj){return obj&&
obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}var BLACKLIST={components:true,context:true,element:true,refs:true,state:true,stateKey:true,wasRendered:true};var DATA_MANAGER_DATA="__DATA_MANAGER_DATA__";var ComponentDataManager=function(){function ComponentDataManager(){_classCallCheck(this,ComponentDataManager)}_createClass(ComponentDataManager,[{key:"createState_",value:function createState_(component,
data){var state=new _metalState2.default(component.getInitialConfig(),component,component);state.setKeysBlacklist(BLACKLIST);state.configState(_metal.object.mixin({},data,_metalState2.default.getStateStatic(component.constructor)));this.getManagerData(component).state_=state}},{key:"dispose",value:function dispose(component){var data=this.getManagerData(component);if(data.state_)data.state_.dispose();component[DATA_MANAGER_DATA]=null}},{key:"get",value:function get(component,name){return this.getManagerData(component).state_.get(name)}},
{key:"getManagerData",value:function getManagerData(component){return component[DATA_MANAGER_DATA]}},{key:"getSyncKeys",value:function getSyncKeys(component){return this.getManagerData(component).state_.getStateKeys()}},{key:"getStateKeys",value:function getStateKeys(component){return this.getManagerData(component).state_.getStateKeys()}},{key:"getState",value:function getState(component){return this.getManagerData(component).state_.getState()}},{key:"getStateInstance",value:function getStateInstance(component){return this.getManagerData(component).state_}},
{key:"replaceNonInternal",value:function replaceNonInternal(component,data){var state=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.getManagerData(component).state_;var keys=state.getStateKeys();for(var i=0;i<keys.length;i++){var key=keys[i];if(!state.getStateKeyConfig(key).internal)if(data.hasOwnProperty(key)&&(0,_metal.isDef)(data[key]))state.set(key,data[key]);else state.setDefaultValue(key)}}},{key:"setState",value:function setState(component,state,callback){this.getManagerData(component).state_.setState(state,
callback)}},{key:"setUp",value:function setUp(component,data){component[DATA_MANAGER_DATA]={};this.createState_(component,data)}}]);return ComponentDataManager}();exports.default=new ComponentDataManager});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/ComponentRenderer",["module","exports","require"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,
descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}var ComponentRenderer=function(){function ComponentRenderer(){_classCallCheck(this,ComponentRenderer)}_createClass(ComponentRenderer,
[{key:"dispose",value:function dispose(){}},{key:"getExtraDataConfig",value:function getExtraDataConfig(){}},{key:"render",value:function render(component){if(!component.element)component.element=document.createElement("div");component.informRendered()}},{key:"setUp",value:function setUp(){}},{key:"update",value:function update(){}}]);return ComponentRenderer}();exports.default=new ComponentRenderer});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/Component",["module","exports","require","./events/events","frontend-js-metal-web$metal","./sync/sync","frontend-js-metal-web$metal-dom","./ComponentDataManager","./ComponentRenderer","frontend-js-metal-web$metal-events"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=
props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,
property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _events=require("./events/events");var _metal=require("frontend-js-metal-web$metal");var _sync=require("./sync/sync");var _metalDom=require("frontend-js-metal-web$metal-dom");var _ComponentDataManager=require("./ComponentDataManager");
var _ComponentDataManager2=_interopRequireDefault(_ComponentDataManager);var _ComponentRenderer=require("./ComponentRenderer");var _ComponentRenderer2=_interopRequireDefault(_ComponentRenderer);var _metalEvents=require("frontend-js-metal-web$metal-events");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj)Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});else obj[key]=value;
return obj}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return call&&(typeof call==="object"||typeof call===
"function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Component=function(_EventEmitter){_inherits(Component,
_EventEmitter);function Component(config,parentElement){_classCallCheck(this,Component);var _this=_possibleConstructorReturn(this,(Component.__proto__||Object.getPrototypeOf(Component)).call(this));_this.elementEventProxy_=new _metalDom.DomEventEmitterProxy(null,_this,proxyBlackList_);_this.eventsStateKeyHandler_=null;_this.forceUpdateCallback_=null;_this.inDocument=false;_this.initialConfig_=config||{};_this.portalElement=null;_this.wasRendered=false;_this.DEFAULT_ELEMENT_PARENT=typeof document!==
"undefined"?document.body:null;_this.setShouldUseFacade(true);_this.element=_this.initialConfig_.element;_this.setUpRenderer_();_this.setUpDataManager_();_this.setUpSyncUpdates_();_this.setUpPortal_(_this.initialConfig_.portalElement);_this.on("stateWillChange",_this.handleStateWillChange_);_this.on("stateChanged",_this.handleComponentStateChanged_);_this.on("eventsChanged",_this.onEventsChanged_);_this.addListenersFromObj_(_this.dataManager_.get(_this,"events"));_this.created();_this.componentCreated_=
true;if(parentElement!==false)_this.renderComponent(parentElement);return _this}_createClass(Component,[{key:"addListenersFromObj_",value:function addListenersFromObj_(obj){var _eventsStateKeyHandle;if(!this.eventsStateKeyHandler_)this.eventsStateKeyHandler_=new _metalEvents.EventHandler;var handles=(0,_events.addListenersFromObj)(this,obj);(_eventsStateKeyHandle=this.eventsStateKeyHandler_).add.apply(_eventsStateKeyHandle,_toConsumableArray(handles))}},{key:"attach",value:function attach(parentElement,
siblingElement){if(!this.inDocument){this.emit("willAttach");this.willAttach();this.attachElement(parentElement,siblingElement);this.inDocument=true;this.attachData_={parent:parentElement,sibling:siblingElement};this.emit("attached",this.attachData_);this.attached()}return this}},{key:"attached",value:function attached(){}},{key:"attachElement",value:function attachElement(parentElement,siblingElement){var element=this.element;if(element&&(siblingElement||!element.parentNode)){var parent=(0,_metalDom.toElement)(parentElement)||
this.DEFAULT_ELEMENT_PARENT;parent.insertBefore(element,(0,_metalDom.toElement)(siblingElement))}}},{key:"created",value:function created(){}},{key:"delegate",value:function delegate(eventName,selector,callback){return this.on("delegate:"+eventName+":"+selector,callback)}},{key:"detach",value:function detach(){if(this.inDocument){this.emit("willDetach");this.willDetach();if(this.element&&this.element.parentNode)this.element.parentNode.removeChild(this.element);this.inDocument=false;this.detached()}this.emit("detached");
return this}},{key:"detached",value:function detached(){}},{key:"disposed",value:function disposed(){}},{key:"disposeInternal",value:function disposeInternal(){this.detach();this.disposed();this.emit("disposed");this.elementEventProxy_.dispose();this.elementEventProxy_=null;this.dataManager_.dispose(this);this.dataManager_=null;this.renderer_.dispose(this);this.renderer_=null;_get(Component.prototype.__proto__||Object.getPrototypeOf(Component.prototype),"disposeInternal",this).call(this)}},{key:"forceUpdate",
value:function forceUpdate(callback){this.forceUpdateCallback_=callback;this.updateRenderer_({forceUpdate:true})}},{key:"getAttachData",value:function getAttachData(){return this.attachData_}},{key:"getDataManager",value:function getDataManager(){return this.dataManager_}},{key:"getInitialConfig",value:function getInitialConfig(){return this.initialConfig_}},{key:"getPortalElement_",value:function getPortalElement_(portalElementSelector){var portalElement=(0,_metalDom.toElement)(portalElementSelector);
if(portalElement)return portalElement;if(portalElementSelector.indexOf("#")===0&&portalElementSelector.indexOf(" ")===-1){portalElement=document.createElement("div");portalElement.setAttribute("id",portalElementSelector.slice(1));(0,_metalDom.enterDocument)(portalElement)}return portalElement}},{key:"getState",value:function getState(){return this.dataManager_.getState(this)}},{key:"getStateKeys",value:function getStateKeys(){return this.dataManager_.getStateKeys(this)}},{key:"getRenderer",value:function getRenderer(){return this.renderer_}},
{key:"handleComponentElementChanged_",value:function handleComponentElementChanged_(prevVal,newVal){this.elementEventProxy_.setOriginEmitter(newVal);if(this.componentCreated_){this.emit("elementChanged",{prevVal:prevVal,newVal:newVal});if(newVal&&this.wasRendered)this.syncVisible(this.dataManager_.get(this,"visible"))}}},{key:"handleComponentStateChanged_",value:function handleComponentStateChanged_(event){if(!this.hasSyncUpdates())this.updateRenderer_(event);(0,_sync.syncState)(this,event.changes);
this.emit("stateSynced",event)}},{key:"handleComponentStateKeyChanged_",value:function handleComponentStateKeyChanged_(data){this.updateRenderer_({changes:_defineProperty({},data.key,data)})}},{key:"handleStateWillChange_",value:function handleStateWillChange_(event){this.willReceiveState(event.changes)}},{key:"hasSyncUpdates",value:function hasSyncUpdates(){return this.syncUpdates_}},{key:"informRendered",value:function informRendered(){var firstRender=!this.hasRendererRendered_;this.hasRendererRendered_=
true;if(this.forceUpdateCallback_){this.forceUpdateCallback_();this.forceUpdateCallback_=null}this.rendered(firstRender);this.emit("rendered",firstRender)}},{key:"informWillUpdate",value:function informWillUpdate(){this.willUpdate.apply(this,arguments)}},{key:"mergeElementClasses_",value:function mergeElementClasses_(class1,class2){return class1?class1+" "+(class2||""):class2}},{key:"onEventsChanged_",value:function onEventsChanged_(event){this.eventsStateKeyHandler_.removeAllListeners();this.addListenersFromObj_(event.newVal)}},
{key:"renderComponent",value:function renderComponent(parentElement){if(!this.hasRendererRendered_){if(!(0,_metal.isServerSide)()&&window.__METAL_DEV_TOOLS_HOOK__)window.__METAL_DEV_TOOLS_HOOK__(this);this.getRenderer().render(this)}this.emit("render");(0,_sync.syncState)(this);this.attach(parentElement);this.wasRendered=true}},{key:"setState",value:function setState(state,callback){this.dataManager_.setState(this,state,callback)}},{key:"setterElementClassesFn_",value:function setterElementClassesFn_(val){var elementClasses=
(0,_metal.getStaticProperty)(this.constructor,"ELEMENT_CLASSES",this.mergeElementClasses_);if(elementClasses)val+=" "+elementClasses;return val.trim()}},{key:"setUpDataManager_",value:function setUpDataManager_(){this.dataManager_=(0,_metal.getStaticProperty)(this.constructor,"DATA_MANAGER");this.dataManager_.setUp(this,_metal.object.mixin({},this.renderer_.getExtraDataConfig(this),Component.DATA))}},{key:"setUpPortal_",value:function setUpPortal_(portalElement){if(!portalElement||!(0,_metal.isElement)(portalElement)&&
!(0,_metal.isString)(portalElement)&&!(0,_metal.isBoolean)(portalElement))return;else if((0,_metal.isBoolean)(portalElement)&&portalElement)portalElement="body";if((0,_metal.isServerSide)()){this.portalElement=true;return}portalElement=this.getPortalElement_(portalElement);if(portalElement){var placeholder=document.createElement("div");portalElement.appendChild(placeholder);this.element=placeholder;this.portalElement=portalElement}}},{key:"setUpRenderer_",value:function setUpRenderer_(){this.renderer_=
(0,_metal.getStaticProperty)(this.constructor,"RENDERER");this.renderer_.setUp(this)}},{key:"setUpSyncUpdates_",value:function setUpSyncUpdates_(){this.syncUpdates_=(0,_metal.getStaticProperty)(this.constructor,"SYNC_UPDATES");if(this.hasSyncUpdates())this.on("stateKeyChanged",this.handleComponentStateKeyChanged_.bind(this))}},{key:"startSkipUpdates",value:function startSkipUpdates(){this.skipUpdates_=true}},{key:"stopSkipUpdates",value:function stopSkipUpdates(){this.skipUpdates_=false}},{key:"syncVisible",
value:function syncVisible(newVal){if(this.element)this.element.style.display=newVal?"":"none"}},{key:"rendered",value:function rendered(){}},{key:"updateRenderer_",value:function updateRenderer_(data){if(!data.forceUpdate)this.forceUpdateCallback_=null;if(!this.skipUpdates_&&this.hasRendererRendered_)this.getRenderer().update(this,data)}},{key:"validatorEventsFn_",value:function validatorEventsFn_(val){return!(0,_metal.isDefAndNotNull)(val)||(0,_metal.isObject)(val)}},{key:"willAttach",value:function willAttach(){}},
{key:"willDetach",value:function willDetach(){}},{key:"willReceiveState",value:function willReceiveState(){}},{key:"willUpdate",value:function willUpdate(){}},{key:"element",get:function get(){return this.elementValue_},set:function set(val){if(!(0,_metal.isElement)(val)&&!(0,_metal.isString)(val)&&(0,_metal.isDefAndNotNull)(val))return;if(val)val=(0,_metalDom.toElement)(val)||this.elementValue_;if(this.elementValue_!==val){var prev=this.elementValue_;this.elementValue_=val;this.handleComponentElementChanged_(prev,
val)}}}],[{key:"isComponentCtor",value:function isComponentCtor(fn){return fn.prototype&&fn.prototype[Component.COMPONENT_FLAG]}},{key:"render",value:function render(Ctor,configOrElement,element){var config=configOrElement;if((0,_metal.isElement)(configOrElement)){config=null;element=configOrElement}var instance=new Ctor(config,false);instance.renderComponent(element);return instance}},{key:"renderToString",value:function renderToString(Ctor,configOrElement){var rendererName=Ctor.RENDERER&&Ctor.RENDERER.RENDERER_NAME;
switch(rendererName){case "jsx":case "soy":case "incremental-dom":{if(typeof IncrementalDOM==="undefined")throw new Error("Error. Trying to render incremental dom "+"based component to string requires IncrementalDOM "+"implementation to be loaded.");var interceptedComponentStrings=[];var patch=IncrementalDOM.patch;var patchInterceptor=function patchInterceptor(){var currentElement=patch.apply(undefined,arguments);interceptedComponentStrings.push(currentElement.innerHTML);IncrementalDOM.patch=patch};
IncrementalDOM.patch=patchInterceptor;Component.render(Ctor,configOrElement).dispose();return interceptedComponentStrings[0]}default:throw new Error("Error. Trying to render non incremental dom "+"based component to string.");}}}]);return Component}(_metalEvents.EventEmitter);Component.DATA={children:{validator:Array.isArray,value:[]},elementClasses:{setter:"setterElementClassesFn_",validator:_metal.isString,value:""},events:{validator:"validatorEventsFn_",value:null},visible:{validator:_metal.isBoolean,
value:true}};Component.COMPONENT_FLAG="__metal_component__";Component.DATA_MANAGER=_ComponentDataManager2.default;Component.ELEMENT_CLASSES="";Component.RENDERER=_ComponentRenderer2.default;Component.SYNC_UPDATES=false;Component.prototype[Component.COMPONENT_FLAG]=true;var proxyBlackList_={eventsChanged:true,stateChanged:true,stateKeyChanged:true};exports.default=Component});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/ComponentRegistry",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=
true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _metal=require("frontend-js-metal-web$metal");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}var ComponentRegistry=function(){function ComponentRegistry(){_classCallCheck(this,
ComponentRegistry)}_createClass(ComponentRegistry,null,[{key:"getConstructor",value:function getConstructor(name){var constructorFn=ComponentRegistry.components_[name];if(!constructorFn)console.error("There's no constructor registered for the component named "+name+".\n\t\t\t\tComponents need to be registered via ComponentRegistry.register.");return constructorFn}},{key:"register",value:function register(constructorFn,name){if(!name)if(constructorFn.hasOwnProperty("NAME"))name=constructorFn.NAME;
else name=(0,_metal.getFunctionName)(constructorFn);constructorFn.NAME=name;ComponentRegistry.components_[name]=constructorFn}}]);return ComponentRegistry}();ComponentRegistry.components_={};exports.default=ComponentRegistry});
Liferay.Loader.define("frontend-js-metal-web$metal-component@2.16.8/lib/all/component",["module","exports","require","../events/events","../Component","../ComponentDataManager","../ComponentRegistry","../ComponentRenderer"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.ComponentRenderer=exports.ComponentRegistry=exports.ComponentDataManager=exports.Component=undefined;var _events=require("../events/events");Object.keys(_events).forEach(function(key){if(key===
"default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _events[key]}})});var _Component=require("../Component");var _Component2=_interopRequireDefault(_Component);var _ComponentDataManager=require("../ComponentDataManager");var _ComponentDataManager2=_interopRequireDefault(_ComponentDataManager);var _ComponentRegistry=require("../ComponentRegistry");var _ComponentRegistry2=_interopRequireDefault(_ComponentRegistry);var _ComponentRenderer=
require("../ComponentRenderer");var _ComponentRenderer2=_interopRequireDefault(_ComponentRenderer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_Component2.default;exports.Component=_Component2.default;exports.ComponentDataManager=_ComponentDataManager2.default;exports.ComponentRegistry=_ComponentRegistry2.default;exports.ComponentRenderer=_ComponentRenderer2.default});
Liferay.Loader.define("frontend-taglib-clay$clay-component@2.14.2/lib/ClayComponent",["module","exports","require","frontend-js-metal-web$metal-component","frontend-js-metal-web$metal-state","frontend-js-metal-web$metal-dom","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});exports.ClayComponent=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=
props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,
property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _metalComponent=require("frontend-js-metal-web$metal-component");var _metalComponent2=_interopRequireDefault(_metalComponent);var _metalState=require("frontend-js-metal-web$metal-state");var _metalDom=require("frontend-js-metal-web$metal-dom");
var _metal=require("frontend-js-metal-web$metal");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=
superClass}var ClayComponent=function(_Component){_inherits(ClayComponent,_Component);function ClayComponent(){_classCallCheck(this,ClayComponent);return _possibleConstructorReturn(this,(ClayComponent.__proto__||Object.getPrototypeOf(ClayComponent)).apply(this,arguments))}_createClass(ClayComponent,[{key:"attached",value:function attached(){var _get2,_this2=this;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];(_get2=_get(ClayComponent.prototype.__proto__||
Object.getPrototypeOf(ClayComponent.prototype),"attached",this)).call.apply(_get2,[this].concat(args));if((0,_metal.isServerSide)()||!this.element)return;var getAttribute=this.element.getAttribute.bind(this.element);this.element.getAttribute=function(attributeName){var attributeValue=getAttribute(attributeName);if(_this2.element&&!attributeValue)attributeValue=_metalDom.domData.get(_this2.element,attributeName);return _metal.core.isDefAndNotNull(attributeValue)?attributeValue:""};for(var dataKey in this.data)if(this.data.hasOwnProperty(dataKey))_metalDom.domData.get(this.element,
"data-"+dataKey,this.data[dataKey])}},{key:"rendered",value:function rendered(){var _get3;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];(_get3=_get(ClayComponent.prototype.__proto__||Object.getPrototypeOf(ClayComponent.prototype),"rendered",this)).call.apply(_get3,[this].concat(args));this._renderDataAttributes()}},{key:"syncData",value:function syncData(newVal,prevVal){if(newVal!=prevVal)this._renderDataAttributes()}},{key:"buildFacade_",
value:function buildFacade_(eventName,data,originalEvent){if(this.getShouldUseFacade()){var facade={data:data,preventDefault:function preventDefault(){facade.preventedDefault=true;if(originalEvent&&originalEvent.preventDefault&&(!originalEvent.preventDefault||!originalEvent.defaultPrevented))originalEvent.preventDefault()},stopInmediatePropagation:function stopInmediatePropagation(){if(originalEvent&&originalEvent.stopInmediatePropagation)originalEvent.stopInmediatePropagation()},stopPropagation:function stopPropagation(){if(originalEvent&&
originalEvent.stopPropagation)originalEvent.stopPropagation()},target:this,type:eventName};return facade}}},{key:"emit",value:function emit(event){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];var eventName=(0,_metal.isObject)(event)?event.name:event;var facade=this.buildFacade_(eventName,event.data,event.originalEvent);args=(0,_metal.isObject)(event)?[facade]:args;var listeners=this.getRawListeners_(eventName);var handlerName=
"handle"+eventName.charAt(0).toUpperCase()+eventName.slice(1);this.runListeners_(listeners,args,facade,this.defaultEventHandler,handlerName);return true}},{key:"runListeners_",value:function runListeners_(listeners,args,facade,defaultEventHandler,handlerName){if(facade)args.push(facade);var defaultListeners=[];for(var i=0;i<listeners.length;i++){var listener=listeners[i].fn||listeners[i];if(listeners[i].default)defaultListeners.push(listener);else listener.apply(this,args)}defaultEventHandler&&defaultEventHandler[handlerName]&&
defaultEventHandler[handlerName].apply(defaultEventHandler,_toConsumableArray(args));if(!facade||!facade.preventedDefault)for(var j=0;j<defaultListeners.length;j++)defaultListeners[j].apply(this,args)}},{key:"_renderDataAttributes",value:function _renderDataAttributes(){for(var dataKey in this.data)if(Object.prototype.hasOwnProperty.call(this.data,dataKey))this.element.setAttribute("data-"+dataKey,this.data[dataKey])}}]);return ClayComponent}(_metalComponent2.default);ClayComponent.STATE={data:_metalState.Config.object(),
defaultEventHandler:_metalState.Config.object()};exports.ClayComponent=ClayComponent;exports.default=ClayComponent});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.7.0/lib/validators",["module","exports","require","frontend-js-metal-web$metal"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _metal=require("frontend-js-metal-web$metal");
var ERROR_ARRAY_OF_TYPE="Expected an array of single type.";var ERROR_OBJECT_OF_TYPE="Expected object of one type.";var ERROR_ONE_OF="Expected one of given values.";var ERROR_ONE_OF_TYPE="Expected one of given types.";var ERROR_SHAPE_OF="Expected object with a specific shape.";var validators={any:function any(){return function(){return true}},array:buildTypeValidator("array"),bool:buildTypeValidator("boolean"),func:buildTypeValidator("function"),number:buildTypeValidator("number"),object:buildTypeValidator("object"),
string:buildTypeValidator("string"),arrayOf:function arrayOf(validator){return maybe(function(value,name,context){var result=validators.array(value,name,context);if(isInvalid(result))return result;return validateArrayItems(validator,value,name,context)})},instanceOf:function instanceOf(expectedClass){return maybe(function(value,name,context){if(value instanceof expectedClass)return true;return composeError("Expected instance of "+expectedClass,name,context)})},objectOf:function objectOf(validator){return maybe(function(value,
name,context){for(var key in value)if(isInvalid(validator(value[key])))return composeError(ERROR_OBJECT_OF_TYPE,name,context);return true})},oneOf:function oneOf(arrayOfValues){return maybe(function(value,name,context){var result=validators.array(arrayOfValues,name,context);if(isInvalid(result))return result;return arrayOfValues.indexOf(value)===-1?composeError(ERROR_ONE_OF,name,context):true})},oneOfType:function oneOfType(arrayOfTypeValidators){return maybe(function(value,name,context){var result=
validators.array(arrayOfTypeValidators,name,context);if(isInvalid(result))return result;for(var i=0;i<arrayOfTypeValidators.length;i++)if(!isInvalid(arrayOfTypeValidators[i](value,name,context)))return true;return composeError(ERROR_ONE_OF_TYPE,name,context)})},shapeOf:function shapeOf(shape){return maybe(function(value,name,context){var result=validators.object(shape,name,context);if(isInvalid(result))return result;for(var key in shape){var validator=shape[key];var required=false;if(validator.config){required=
validator.config.required;validator=validator.config.validator}if(required&&!(0,_metal.isDefAndNotNull)(value[key])||isInvalid(validator(value[key])))return composeError(ERROR_SHAPE_OF,name,context)}return true})}};function buildTypeValidator(expectedType){var validatorFn=maybe(validateType.bind(null,expectedType));return function(){if(arguments.length===0)return validatorFn;else return validatorFn.apply(undefined,arguments)}}function composeError(error,name,context){var compName=context?(0,_metal.getFunctionName)(context.constructor):
null;var renderer=context&&context.getRenderer&&context.getRenderer();var parent=renderer&&renderer.getParent&&renderer.getParent();var parentName=parent?(0,_metal.getFunctionName)(parent.constructor):null;var location=parentName?"Check render method of '"+parentName+"'.":"";return new Error("Warning: Invalid state passed to '"+name+"'. "+(error+" Passed to '"+compName+"'. "+location))}function getType(value){return Array.isArray(value)?"array":typeof value==="undefined"?"undefined":_typeof(value)}
function isInvalid(result){return result instanceof Error}function maybe(typeValidator){return function(value,name,context){return(0,_metal.isDefAndNotNull)(value)?typeValidator(value,name,context):true}}function validateArrayItems(validator,value,name,context){for(var i=0;i<value.length;i++)if(isInvalid(validator(value[i],name,context)))return composeError(ERROR_ARRAY_OF_TYPE,name,context);return true}function validateType(expectedType,value,name,context){var type=getType(value);if(type!==expectedType)return composeError("Expected type '"+
expectedType+"', but received type '"+type+"'.",name,context);return true}exports.default=validators});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.7.0/lib/Config",["module","exports","require","frontend-js-metal-web$metal","./validators"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _metal=require("frontend-js-metal-web$metal");var _validators=require("./validators");var _validators2=_interopRequireDefault(_validators);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Config={internal:function internal(){var _internal=
arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return mergeConfig(this,{internal:_internal})},required:function required(){var _required=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;return mergeConfig(this,{required:_required})},setter:function setter(_setter){return mergeConfig(this,{setter:_setter})},validator:function validator(_validator){return mergeConfig(this,{validator:_validator})},value:function value(_value){return mergeConfig(this,{value:_value})}};function mergeConfig(context,
config){var obj=context;if(obj===Config){obj=Object.create(Config);obj.config={}}_metal.object.mixin(obj.config,config);return obj}var fnNames=Object.keys(_validators2.default);fnNames.forEach(function(name){return Config[name]=function(){return this.validator(_validators2.default[name])}});exports.default=Config});
Liferay.Loader.define("frontend-js-metal-web$metal-state@2.7.0/lib/State",["module","exports","require","frontend-js-metal-web$metal","frontend-js-metal-web$metal-events"],function(module,exports,require){var define=undefined;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=
true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null)return undefined;
else return get(parent,property,receiver)}else if("value"in desc)return desc.value;else{var getter=desc.get;if(getter===undefined)return undefined;return getter.call(receiver)}};var _metal=require("frontend-js-metal-web$metal");var _metalEvents=require("frontend-js-metal-web$metal-events");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=
superClass}var State=function(_EventEmitter){_inherits(State,_EventEmitter);function State(opt_config,opt_obj,opt_context){_classCallCheck(this,State);var _this=_possibleConstructorReturn(this,(State.__proto__||Object.getPrototypeOf(State)).call(this));_this.context_=opt_context||_this;_this.keysBlacklist_=null;_this.obj_=opt_obj||_this;_this.eventData_=null;_this.scheduledBatchData_=null;_this.stateInfo_={};_this.stateConfigs_={};_this.initialValues_=_metal.object.mixin({},opt_config);_this.setShouldUseFacade(true);
_this.configStateFromStaticHint_();Object.defineProperty(_this.obj_,State.STATE_REF_KEY,{configurable:true,enumerable:false,value:_this});return _this}_createClass(State,[{key:"assertGivenIfRequired_",value:function assertGivenIfRequired_(name){var config=this.stateConfigs_[name];if(config.required){var info=this.getStateInfo(name);var value=info.state===State.KeyStates.INITIALIZED?this.get(name):this.initialValues_[name];if(!(0,_metal.isDefAndNotNull)(value)){var errorMessage='The property called "'+
name+"\" is required but didn't receive a value.";if(this.shouldThrowValidationError())throw new Error(errorMessage);else console.error(errorMessage)}}}},{key:"assertValidatorReturnInstanceOfError_",value:function assertValidatorReturnInstanceOfError_(validatorReturn){if(validatorReturn instanceof Error)if(this.shouldThrowValidationError())throw validatorReturn;else console.error("Warning: "+validatorReturn)}},{key:"assertValidStateKeyName_",value:function assertValidStateKeyName_(name){if(this.keysBlacklist_&&
this.keysBlacklist_[name])throw new Error("It's not allowed to create a state key with the name \""+name+'".');}},{key:"buildKeyPropertyDef_",value:function buildKeyPropertyDef_(name){return{configurable:true,enumerable:true,get:function get(){return this[State.STATE_REF_KEY].getStateKeyValue_(name)},set:function set(val){this[State.STATE_REF_KEY].setStateKeyValue_(name,val)}}}},{key:"callFunction_",value:function callFunction_(fn,args){if((0,_metal.isString)(fn))return this.context_[fn].apply(this.context_,
args);else if((0,_metal.isFunction)(fn))return fn.apply(this.context_,args)}},{key:"callSetter_",value:function callSetter_(name,value,currentValue){var config=this.stateConfigs_[name];if(config.setter)value=this.callFunction_(config.setter,[value,currentValue]);return value}},{key:"callValidator_",value:function callValidator_(name,value){var config=this.stateConfigs_[name];if(config.validator){var validatorReturn=this.callFunction_(config.validator,[value,name,this.context_]);this.assertValidatorReturnInstanceOfError_(validatorReturn);
return validatorReturn}return true}},{key:"canSetState",value:function canSetState(name){var info=this.getStateInfo(name);return!this.stateConfigs_[name].writeOnce||!info.written}},{key:"configState",value:function configState(configs,opt_context){var names=Object.keys(configs);if(names.length===0)return;if(opt_context!==false){var props={};for(var i=0;i<names.length;i++){var name=names[i];this.assertValidStateKeyName_(name);props[name]=this.buildKeyPropertyDef_(name)}Object.defineProperties(opt_context||
this.obj_,props)}this.stateConfigs_=configs;for(var _i=0;_i<names.length;_i++){var _name=names[_i];configs[_name]=configs[_name].config?configs[_name].config:configs[_name];this.assertGivenIfRequired_(names[_i]);this.validateInitialValue_(names[_i])}}},{key:"configStateFromStaticHint_",value:function configStateFromStaticHint_(){var ctor=this.constructor;if(ctor!==State){var defineContext=void 0;if(this.obj_===this){defineContext=ctor.hasConfiguredState_?false:ctor.prototype;ctor.hasConfiguredState_=
true}this.configState(State.getStateStatic(ctor),defineContext)}}},{key:"disposeInternal",value:function disposeInternal(){_get(State.prototype.__proto__||Object.getPrototypeOf(State.prototype),"disposeInternal",this).call(this);this.initialValues_=null;this.stateInfo_=null;this.stateConfigs_=null;this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function emitBatchEvent_(){if(!this.isDisposed()){var data=this.scheduledBatchData_;this.scheduledBatchData_=null;this.context_.emit("stateChanged",
data)}}},{key:"get",value:function get(name){return this.obj_[name]}},{key:"getState",value:function getState(opt_names){var state={};var names=opt_names||this.getStateKeys();for(var i=0;i<names.length;i++)state[names[i]]=this.get(names[i]);return state}},{key:"getStateInfo",value:function getStateInfo(name){if(!this.stateInfo_[name])this.stateInfo_[name]={};return this.stateInfo_[name]}},{key:"getStateKeyConfig",value:function getStateKeyConfig(name){return this.stateConfigs_?this.stateConfigs_[name]:
null}},{key:"getStateKeys",value:function getStateKeys(){return this.stateConfigs_?Object.keys(this.stateConfigs_):[]}},{key:"getStateKeyValue_",value:function getStateKeyValue_(name){if(!this.warnIfDisposed_(name)){this.initStateKey_(name);return this.getStateInfo(name).value}}},{key:"hasBeenSet",value:function hasBeenSet(name){var info=this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZED||this.hasInitialValue_(name)}},{key:"hasInitialValue_",value:function hasInitialValue_(name){return this.initialValues_.hasOwnProperty(name)}},
{key:"hasStateKey",value:function hasStateKey(key){if(!this.warnIfDisposed_(key))return!!this.stateConfigs_[key]}},{key:"informChange_",value:function informChange_(name,prevVal){if(this.shouldInformChange_(name,prevVal)){var data=_metal.object.mixin({key:name,newVal:this.get(name),prevVal:prevVal},this.eventData_);this.context_.emit(name+"Changed",data);this.context_.emit("stateKeyChanged",data);this.scheduleBatchEvent_(data)}}},{key:"initStateKey_",value:function initStateKey_(name){var info=this.getStateInfo(name);
if(info.state!==State.KeyStates.UNINITIALIZED)return;info.state=State.KeyStates.INITIALIZING;this.setInitialValue_(name);if(!info.written)this.setDefaultValue(name);info.state=State.KeyStates.INITIALIZED}},{key:"removeStateKey",value:function removeStateKey(name){this.stateInfo_[name]=null;this.stateConfigs_[name]=null;delete this.obj_[name]}},{key:"scheduleBatchEvent_",value:function scheduleBatchEvent_(changeData){if(!this.scheduledBatchData_){_metal.async.nextTick(this.emitBatchEvent_,this);this.scheduledBatchData_=
_metal.object.mixin({changes:{}},this.eventData_)}var name=changeData.key;var changes=this.scheduledBatchData_.changes;if(changes[name])changes[name].newVal=changeData.newVal;else changes[name]=changeData}},{key:"set",value:function set(name,value){if(this.hasStateKey(name))this.obj_[name]=value}},{key:"setDefaultValue",value:function setDefaultValue(name){var config=this.stateConfigs_[name];if(config.value!==undefined)this.set(name,config.value);else this.set(name,this.callFunction_(config.valueFn))}},
{key:"setEventData",value:function setEventData(data){this.eventData_=data}},{key:"setInitialValue_",value:function setInitialValue_(name){if(this.hasInitialValue_(name)){this.set(name,this.initialValues_[name]);this.initialValues_[name]=undefined}}},{key:"setKeysBlacklist",value:function setKeysBlacklist(blacklist){this.keysBlacklist_=blacklist}},{key:"setState",value:function setState(values,opt_callback){var _this2=this;Object.keys(values).forEach(function(name){return _this2.set(name,values[name])});
if(opt_callback&&this.scheduledBatchData_)this.context_.once("stateChanged",opt_callback)}},{key:"setStateKeyValue_",value:function setStateKeyValue_(name,value){if(this.warnIfDisposed_(name)||!this.canSetState(name)||!this.validateKeyValue_(name,value))return;var prevVal=this.get(name);var info=this.getStateInfo(name);info.value=this.callSetter_(name,value,prevVal);this.assertGivenIfRequired_(name);info.written=true;this.informChange_(name,prevVal)}},{key:"shouldInformChange_",value:function shouldInformChange_(name,
prevVal){var info=this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZED&&((0,_metal.isObject)(prevVal)||prevVal!==this.get(name))}},{key:"shouldThrowValidationError",value:function shouldThrowValidationError(){return false}},{key:"validateInitialValue_",value:function validateInitialValue_(name){if(this.hasInitialValue_(name)&&!this.callValidator_(name,this.initialValues_[name]))delete this.initialValues_[name]}},{key:"validateKeyValue_",value:function validateKeyValue_(name,value){var info=
this.getStateInfo(name);return info.state===State.KeyStates.INITIALIZING||this.callValidator_(name,value)}},{key:"warnIfDisposed_",value:function warnIfDisposed_(name){var disposed=this.isDisposed();if(disposed)console.warn('Error. Trying to access property "'+name+'" on disposed instance');return disposed}}],[{key:"getStateStatic",value:function getStateStatic(ctor){return(0,_metal.getStaticProperty)(ctor,"STATE",State.mergeState)}},{key:"mergeState",value:function mergeState(mergedVal,currVal){return _metal.object.mixin({},
currVal,mergedVal)}}]);return State}(_metalEvents.EventEmitter);State.STATE_REF_KEY="__METAL_STATE_REF_KEY__";State.KeyStates={UNINITIALIZED:undefined,INITIALIZING:1,INITIALIZED:2};exports.default=State});
